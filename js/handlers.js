(function(_0x3f3b5d,_0x1b922f){const _0x1496ce=a0_0x50b7,_0x53ee2e=_0x3f3b5d();while(!![]){try{const _0x3fa7e4=parseInt(_0x1496ce(0x230))/0x1+parseInt(_0x1496ce(0x2ef))/0x2+parseInt(_0x1496ce(0x1d9))/0x3+parseInt(_0x1496ce(0x290))/0x4+-parseInt(_0x1496ce(0x27a))/0x5+parseInt(_0x1496ce(0x1e3))/0x6+parseInt(_0x1496ce(0x205))/0x7*(-parseInt(_0x1496ce(0x1eb))/0x8);if(_0x3fa7e4===_0x1b922f)break;else _0x53ee2e['push'](_0x53ee2e['shift']());}catch(_0x3f2a0d){_0x53ee2e['push'](_0x53ee2e['shift']());}}}(a0_0x4c96,0x447f9),function(_0x3ee723,_0x15deac){const _0x20204d=a0_0x50b7,_0x7e66e3=(function(){let _0x3c514a=!![];return function(_0x24faf4,_0xa346e8){const _0x328ac8=_0x3c514a?function(){const _0x2f52e0=a0_0x50b7;if(_0xa346e8){const _0x59fdd8=_0xa346e8[_0x2f52e0(0x1ca)](_0x24faf4,arguments);return _0xa346e8=null,_0x59fdd8;}}:function(){};return _0x3c514a=![],_0x328ac8;};}()),_0x26617f=_0x7e66e3(this,function(){const _0x44862d=a0_0x50b7;return _0x26617f[_0x44862d(0x1f0)]()[_0x44862d(0x2ab)](_0x44862d(0x2b0))[_0x44862d(0x1f0)]()[_0x44862d(0x253)](_0x26617f)[_0x44862d(0x2ab)]('(((.+)+)+)+$');});_0x26617f();const _0x2a0fc7=a0_0x4aad,_0x28bbd0=_0x3ee723();while(!![]){try{const _0x12c745=parseInt(_0x2a0fc7(0x21e))/0x1*(-parseInt(_0x2a0fc7(0x20e))/0x2)+parseInt(_0x2a0fc7(0x225))/0x3*(parseInt(_0x2a0fc7(0x149))/0x4)+-parseInt(_0x2a0fc7(0x204))/0x5*(parseInt(_0x2a0fc7(0x158))/0x6)+-parseInt(_0x2a0fc7(0x1f8))/0x7*(-parseInt(_0x2a0fc7(0x1b3))/0x8)+-parseInt(_0x2a0fc7(0x187))/0x9+parseInt(_0x2a0fc7(0x1d9))/0xa*(-parseInt(_0x2a0fc7(0x1c8))/0xb)+parseInt(_0x2a0fc7(0xee))/0xc;if(_0x12c745===_0x15deac)break;else _0x28bbd0[_0x20204d(0x1ff)](_0x28bbd0[_0x20204d(0x26c)]());}catch(_0x316c55){_0x28bbd0[_0x20204d(0x1ff)](_0x28bbd0[_0x20204d(0x26c)]());}}}(a0_0x3e83,0x6387e));function a0_0x50b7(_0x2635b7,_0x55b3fe){const _0x1f7c84=a0_0x4c96();return a0_0x50b7=function(_0x4e6675,_0x388d41){_0x4e6675=_0x4e6675-0x194;let _0x4c9605=_0x1f7c84[_0x4e6675];return _0x4c9605;},a0_0x50b7(_0x2635b7,_0x55b3fe);}const a0_0x4796d2=(function(){let _0x9bfea1=!![];return function(_0x1ab83a,_0x1010c4){const _0x32ccdd=_0x9bfea1?function(){const _0x461c25=a0_0x4aad;if(_0x1010c4){const _0x575ecc=_0x1010c4[_0x461c25(0x10a)](_0x1ab83a,arguments);return _0x1010c4=null,_0x575ecc;}}:function(){};return _0x9bfea1=![],_0x32ccdd;};}()),a0_0x5d532c=a0_0x4796d2(this,function(){const _0x43d0d2=a0_0x4aad;return a0_0x5d532c[_0x43d0d2(0x19c)]()[_0x43d0d2(0x1fb)](_0x43d0d2(0x1d8))[_0x43d0d2(0x19c)]()[_0x43d0d2(0x11e)](a0_0x5d532c)[_0x43d0d2(0x1fb)](_0x43d0d2(0x1d8));});a0_0x5d532c();import{supabase,parseCurrency,formatCurrency,fileToBase64,jsonToXLSXDataURL,formatApiDateToBR,formatApiNumberToBR,parseApiNumber}from'./utils.js';import*as a0_0xa42681 from'./ui.js';export async function logAction(_0x30845e,_0x3e1e06){const _0x440ad7=a0_0x50b7,_0x25d587=a0_0x4aad,{error:_0x4e7877}=await supabase[_0x440ad7(0x1fa)](_0x25d587(0x1eb))[_0x440ad7(0x2b7)]({'who_did':_0x30845e[_0x440ad7(0x23b)],'what_did':_0x3e1e06});_0x4e7877&&console[_0x25d587(0x1fa)](_0x440ad7(0x1dc),_0x4e7877);}export function handleArquitetosTableClick(_0x2db359,_0x4cf9f2){const _0xc9a79c=a0_0x50b7,_0x4ecc22=a0_0x4aad,_0x2d6991=_0x4cf9f2[_0x4ecc22(0x123)][_0x4ecc22(0xf0)](_0x4ecc22(0x19b)),_0x46cfd4=_0x4cf9f2[_0x4ecc22(0x123)][_0x4ecc22(0xf0)](_0x4ecc22(0xe6)),_0x4264ae=_0x4cf9f2['target'][_0x4ecc22(0xf0)](_0xc9a79c(0x228)),_0x5a4ff3=_0x4cf9f2[_0xc9a79c(0x2d6)][_0x4ecc22(0xf0)](_0x4ecc22(0x1e1));_0x2d6991&&(_0x4cf9f2[_0x4ecc22(0xfb)](),handleConsultarVendasClick(_0x2db359,_0x4cf9f2,_0x2d6991[_0x4ecc22(0x1b4)]['id']));if(_0x46cfd4)a0_0xa42681[_0x4ecc22(0xe2)](_0x2db359,_0x46cfd4[_0x4ecc22(0x1b4)]['id']);if(_0x4264ae)deleteArquiteto(_0x2db359,_0x4264ae[_0x4ecc22(0x1b4)]['id']);if(_0x5a4ff3)a0_0xa42681[_0xc9a79c(0x2bb)](_0x2db359,_0x5a4ff3[_0x4ecc22(0x1b4)]['id']);}export function handleRTFileSelect(_0x2c43be,_0x195e90){const _0x53c6ba=a0_0x50b7,_0x56d072=a0_0x4aad;_0x2c43be[_0x56d072(0x207)]=![];const _0x340252=_0x195e90[_0x56d072(0x123)][_0x56d072(0x150)][0x0];if(!_0x340252)return;document[_0x56d072(0x1ab)](_0x53c6ba(0x22f))[_0x56d072(0x216)]=_0x56d072(0x12b)+_0x340252[_0x56d072(0x232)];const _0x7a3179=new FileReader();_0x7a3179[_0x56d072(0x154)]=_0x2a47f2=>{const _0x5e7f04=_0x53c6ba,_0x35b1cf=_0x56d072,_0x1b78a9=new Uint8Array(_0x2a47f2[_0x35b1cf(0x123)][_0x35b1cf(0xdc)]),_0x85e39e=XLSX[_0x5e7f04(0x2c7)](_0x1b78a9,{'type':_0x35b1cf(0x129)});_0x2c43be[_0x35b1cf(0x179)]=XLSX[_0x5e7f04(0x1ec)][_0x35b1cf(0x197)](_0x85e39e[_0x35b1cf(0x1d7)][_0x85e39e[_0x35b1cf(0x107)][0x0]],{'raw':![]});const _0x600d7f=_0x2c43be[_0x5e7f04(0x2a0)][_0x5e7f04(0x2d3)]>0x0?Object[_0x35b1cf(0x1a3)](_0x2c43be[_0x35b1cf(0x179)][0x0]):[];a0_0xa42681[_0x35b1cf(0x21b)](_0x2c43be,_0x600d7f);},_0x7a3179[_0x56d072(0x170)](_0x340252);}export async function handleRtMapping(_0xb97b01){const _0x53fca6=a0_0x50b7,_0x31600f=a0_0x4aad,_0x492c12={};document[_0x53fca6(0x1cc)](_0x31600f(0x117))[_0x31600f(0x1f7)](_0x31600f(0x1f1))[_0x31600f(0x1b9)](_0xa9fe6=>{const _0x2c45da=_0x31600f;_0x492c12[_0xa9fe6[_0x2c45da(0x232)]]=_0xa9fe6[_0x2c45da(0x221)];});if(!_0x492c12[_0x53fca6(0x29d)]||!_0x492c12[_0x31600f(0x186)]){alert('Os\x20campos\x20\x27ID\x20Parceiro\x27\x20e\x20\x27Valor\x20Venda\x27\x20são\x20obrigatórios.');return;}if(_0xb97b01[_0x31600f(0x207)]&&!_0x492c12[_0x53fca6(0x222)]){alert(_0x31600f(0x193));return;}let _0x478061=_0xb97b01[_0x31600f(0x179)][_0x31600f(0x128)](_0x49a9ec=>{const _0x45dc05=_0x31600f,_0x549e00={};for(const _0x5b9e0c in _0x492c12){if(_0x492c12[_0x5b9e0c])_0x549e00[_0x5b9e0c]=_0x49a9ec[_0x492c12[_0x5b9e0c]];}if(_0xb97b01[_0x45dc05(0x207)])_0x549e00[_0x45dc05(0x186)]=parseApiNumber(_0x549e00[_0x45dc05(0x186)]);return _0x549e00;});if(_0xb97b01[_0x31600f(0x207)]){const _0x255b00=_0x478061[_0x31600f(0x128)](_0x281595=>_0x281595[_0x31600f(0x1ea)])[_0x31600f(0x13a)](_0x394bf1=>_0x394bf1);if(_0x255b00[_0x53fca6(0x2d3)]>0x0){const {data:_0x5d7e6b,error:_0x439c62}=await supabase[_0x53fca6(0x1fa)](_0x53fca6(0x2ad))['select']('id_pedido')['in'](_0x31600f(0x14a),_0x255b00);}}_0x478061[_0x31600f(0x167)]>0x0?await processRTData(_0xb97b01,_0x478061):alert(_0x31600f(0xe0));}export async function processRTData(_0x236ac7,_0x4a18b0){const _0x3567bc=a0_0x50b7,_0x1d9728=a0_0x4aad,_0x156f0f=new Date()[_0x1d9728(0x11d)](_0x3567bc(0x24f)),_0x53370b=new Date()[_0x1d9728(0x13b)]()[_0x1d9728(0x174)](0x0,0xa);let _0x39ccf6=null;if(_0x236ac7[_0x1d9728(0x207)])_0x39ccf6={'name':_0x3567bc(0x20c)+_0x156f0f[_0x1d9728(0x111)](/\//g,'-')+_0x1d9728(0xf2),'dataUrl':jsonToXLSXDataURL(_0x236ac7[_0x3567bc(0x2a0)])};else{const _0x11f280=document[_0x3567bc(0x1cc)](_0x1d9728(0x1f9))[_0x3567bc(0x2af)][0x0];if(_0x11f280)_0x39ccf6={'name':_0x11f280[_0x1d9728(0x232)],'dataUrl':await fileToBase64(_0x11f280)};}if(_0x39ccf6){const {data:_0x32537a,error:_0x49583}=await supabase[_0x1d9728(0x165)](_0x1d9728(0x202))[_0x3567bc(0x2b7)]({'data_importacao':_0x53370b,'name':_0x39ccf6[_0x1d9728(0x232)],'dataUrl':_0x39ccf6[_0x1d9728(0x155)]})[_0x1d9728(0x1f1)]()[_0x1d9728(0x1ad)]();if(_0x49583)console[_0x1d9728(0x1fa)]('Erro\x20ao\x20salvar\x20arquivo:',_0x49583);else _0x236ac7[_0x1d9728(0x152)][_0x156f0f]={'name':_0x32537a[_0x1d9728(0x232)],'dataUrl':_0x32537a[_0x1d9728(0x155)],'id':_0x32537a['id']},await logAction(_0x236ac7,_0x1d9728(0x11a)+_0x39ccf6[_0x1d9728(0x232)]);}const _0x2107ff={};for(const _0x509127 of _0x4a18b0){const _0x493153=String(_0x509127[_0x1d9728(0x235)]);if(!_0x493153)continue;const _0x3a90d7=parseCurrency(_0x509127[_0x1d9728(0x186)]);let _0x3e7409=_0x236ac7[_0x1d9728(0x16f)][_0x3567bc(0x2c8)](_0x5412eb=>_0x5412eb['id']===_0x493153);if(!_0x3e7409){const _0x56c5f3={'id':_0x493153,'nome':_0x509127[_0x3567bc(0x256)]||_0x3567bc(0x1f5),'salesCount':0x0,'valorVendasTotal':0x0,'pontos':0x0,'rtPercentual':0.05,'rt_acumulado':0x0,'rt_total_pago':0x0},{data:_0xa5481d,error:_0x2db166}=await supabase[_0x1d9728(0x165)](_0x1d9728(0x16f))[_0x1d9728(0x21d)](_0x56c5f3)[_0x1d9728(0x1f1)]()['single']();if(_0x2db166){console[_0x3567bc(0x1c9)](_0x1d9728(0x1ef)+_0x493153+':',_0x2db166);continue;}_0x236ac7[_0x1d9728(0x16f)][_0x3567bc(0x1ff)](_0xa5481d),_0x3e7409=_0xa5481d,await logAction(_0x236ac7,_0x1d9728(0x21c)+_0x493153+_0x1d9728(0x1b0));}if(!_0x2107ff[_0x493153])_0x2107ff[_0x493153]={'valorVendasTotal':_0x3e7409[_0x3567bc(0x20a)]||0x0,'salesCount':_0x3e7409[_0x3567bc(0x1ae)]||0x0,'pontos':_0x3e7409[_0x1d9728(0x15b)]||0x0,'rt_acumulado':parseFloat(_0x3e7409[_0x1d9728(0x14c)]||0x0)};_0x2107ff[_0x493153][_0x3567bc(0x20a)]+=_0x3a90d7,_0x2107ff[_0x493153][_0x1d9728(0xe9)]+=0x1,_0x2107ff[_0x493153][_0x1d9728(0x15b)]+=Math[_0x1d9728(0x100)](_0x3a90d7/0x3e8);if(_0x236ac7[_0x1d9728(0x1a4)])_0x2107ff[_0x493153][_0x1d9728(0x14c)]+=_0x3a90d7*(_0x3e7409[_0x1d9728(0x10f)]||0.05);}await Promise[_0x1d9728(0x141)](Object[_0x1d9728(0x1a3)](_0x2107ff)[_0x1d9728(0x128)](_0x4df1d2=>supabase[_0x3567bc(0x1fa)](_0x1d9728(0x16f))[_0x1d9728(0x125)](_0x2107ff[_0x4df1d2])['eq']('id',_0x4df1d2)));if(_0x236ac7[_0x1d9728(0x207)]){const _0x56285b=_0x4a18b0['map'](_0x324d0a=>({'id_parceiro':_0x324d0a[_0x1d9728(0x235)],'valor_nota':_0x324d0a[_0x1d9728(0x186)],'data_finalizacao_prevenda':_0x324d0a[_0x3567bc(0x218)],'id_pedido':_0x324d0a[_0x1d9728(0x1ea)],'consultor':_0x324d0a['executivo']})),{error:_0x4e8408}=await supabase[_0x3567bc(0x1fa)](_0x1d9728(0x1b1))[_0x1d9728(0x21d)](_0x56285b);_0x4e8408&&(alert(_0x1d9728(0x1cd)+_0x4e8408['message']),console[_0x3567bc(0x1c9)](_0x1d9728(0x19a),_0x4e8408));}alert(_0x1d9728(0x1ce)),await _0x236ac7[_0x1d9728(0x18c)]();}export async function handleAddArquiteto(_0x4f77d2,_0x1dd317){const _0x21a4dc=a0_0x50b7,_0x5d6f8d=a0_0x4aad;_0x1dd317[_0x5d6f8d(0xfb)]();const _0x19da7c=document[_0x5d6f8d(0x1ab)](_0x5d6f8d(0x1c9))['value'],_0x1a0f7b=document[_0x21a4dc(0x1cc)](_0x21a4dc(0x29f))[_0x5d6f8d(0x221)];if(_0x4f77d2[_0x5d6f8d(0x16f)][_0x5d6f8d(0x1fe)](_0x40a15f=>_0x40a15f['id']===_0x19da7c)){alert(_0x5d6f8d(0x172));return;}const _0x293b6a={'id':_0x19da7c,'nome':_0x1a0f7b,'email':document[_0x21a4dc(0x1cc)](_0x5d6f8d(0x16b))[_0x5d6f8d(0x221)],'telefone':document[_0x5d6f8d(0x1ab)](_0x5d6f8d(0x206))[_0x5d6f8d(0x221)],'pix':document['getElementById'](_0x5d6f8d(0x1e4))[_0x5d6f8d(0x221)],'salesCount':0x0,'valorVendasTotal':0x0,'pontos':0x0,'rtPercentual':0.05,'rt_acumulado':0x0,'rt_total_pago':0x0},{data:_0x34160a,error:_0xa94737}=await supabase[_0x5d6f8d(0x165)](_0x5d6f8d(0x16f))[_0x5d6f8d(0x21d)](_0x293b6a)[_0x5d6f8d(0x1f1)]()[_0x21a4dc(0x2ac)]();_0xa94737?alert(_0x21a4dc(0x27f)+_0xa94737[_0x5d6f8d(0x1aa)]):(_0x4f77d2[_0x5d6f8d(0x16f)][_0x5d6f8d(0x1e6)](_0x34160a),_0x4f77d2[_0x5d6f8d(0x177)][_0x34160a['id']]=_0x34160a[_0x21a4dc(0x1ac)],await logAction(_0x4f77d2,_0x5d6f8d(0x19f)+_0x1a0f7b+_0x5d6f8d(0x200)+_0x19da7c+')'),a0_0xa42681[_0x5d6f8d(0x218)](_0x4f77d2),_0x1dd317[_0x5d6f8d(0x123)][_0x21a4dc(0x2ca)]());}export function handleArquitetoFileUpload(_0x3f51ec,_0x383886){const _0x1e1f2f=a0_0x50b7,_0x45b625=a0_0x4aad,_0x2f5079=_0x383886[_0x1e1f2f(0x2d6)][_0x45b625(0x150)][0x0];if(!_0x2f5079)return;document[_0x45b625(0x1ab)](_0x45b625(0x12d))[_0x45b625(0x216)]='Arquivo:\x20'+_0x2f5079[_0x1e1f2f(0x268)];const _0x2ea34b=new FileReader();_0x2ea34b[_0x45b625(0x154)]=_0x3fbd5e=>{const _0x3eb00a=_0x1e1f2f,_0x2b7a2c=_0x45b625,_0x47c41a=new Uint8Array(_0x3fbd5e[_0x2b7a2c(0x123)][_0x3eb00a(0x25e)]),_0x112d46=XLSX[_0x2b7a2c(0x188)](_0x47c41a,{'type':_0x2b7a2c(0x129)});_0x3f51ec[_0x2b7a2c(0x1e5)]=XLSX[_0x3eb00a(0x1ec)][_0x2b7a2c(0x197)](_0x112d46[_0x3eb00a(0x24a)][_0x112d46[_0x2b7a2c(0x107)][0x0]],{'raw':![]});const _0x3b332a=_0x3f51ec['tempArquitetoData'][_0x2b7a2c(0x167)]>0x0?Object[_0x2b7a2c(0x1a3)](_0x3f51ec[_0x2b7a2c(0x1e5)][0x0]):[];a0_0xa42681[_0x2b7a2c(0x1d5)](_0x3f51ec,_0x3b332a);},_0x2ea34b[_0x45b625(0x170)](_0x2f5079);}export async function handleArquitetoMapping(_0x39e46a){const _0xc89b8a=a0_0x50b7,_0x26e5ac=a0_0x4aad,_0x56775f={};document[_0x26e5ac(0x1ab)](_0x26e5ac(0x106))[_0x26e5ac(0x1f7)](_0x26e5ac(0x1f1))[_0x26e5ac(0x1b9)](_0x1e82bb=>{const _0x5ed9d4=_0x26e5ac;_0x56775f[_0x1e82bb[_0x5ed9d4(0x232)]]=_0x1e82bb[_0x5ed9d4(0x221)];});if(!_0x56775f['id']||!_0x56775f[_0x26e5ac(0x159)]){alert('Os\x20campos\x20\x27ID\x27\x20e\x20\x27Nome\x27\x20são\x20obrigatórios\x20no\x20mapeamento.');return;}const _0x22f7d3=[],_0x470d55=[];_0x39e46a[_0xc89b8a(0x1e2)][_0xc89b8a(0x1a8)](_0x10aa10=>{const _0x234777=_0x26e5ac,_0x483538=String(_0x10aa10[_0x56775f['id']]||'');if(!_0x483538)return;const _0x130e41={'id':_0x483538,'nome':_0x10aa10[_0x56775f[_0x234777(0x159)]],'email':_0x10aa10[_0x56775f[_0x234777(0x195)]]||null,'telefone':_0x10aa10[_0x56775f[_0x234777(0x131)]]||null,'pix':_0x10aa10[_0x56775f[_0x234777(0x21a)]]||null,'tipo_chave_pix':_0x10aa10[_0x56775f[_0x234777(0x15e)]]||null},_0x1eed52=_0x39e46a[_0x234777(0x16f)][_0x234777(0xff)](_0x1ea0e7=>_0x1ea0e7['id']===_0x483538);_0x1eed52?_0x470d55[_0x234777(0x1e6)](_0x130e41):_0x22f7d3[_0x234777(0x1e6)]({..._0x130e41,'salesCount':0x0,'valorVendasTotal':0x0,'pontos':0x0,'rtPercentual':0.05,'rt_acumulado':0x0,'rt_total_pago':0x0});});let _0x3e8a91=!![],_0x2a9ccb='',_0x50e880=0x0,_0x115457=0x0;try{if(_0x22f7d3[_0xc89b8a(0x2d3)]>0x0){const {error:_0x49413b}=await supabase[_0x26e5ac(0x165)](_0x26e5ac(0x16f))[_0x26e5ac(0x21d)](_0x22f7d3);if(_0x49413b)throw _0x49413b;_0x50e880=_0x22f7d3[_0xc89b8a(0x2d3)];}if(_0x470d55[_0x26e5ac(0x167)]>0x0){const _0x11118d=_0x470d55[_0xc89b8a(0x1c8)](_0x552503=>supabase[_0x26e5ac(0x165)](_0xc89b8a(0x1e7))[_0x26e5ac(0x125)]({'nome':_0x552503[_0xc89b8a(0x284)],'email':_0x552503[_0x26e5ac(0x195)],'telefone':_0x552503[_0xc89b8a(0x1b5)],'pix':_0x552503[_0x26e5ac(0x108)],'tipo_chave_pix':_0x552503[_0x26e5ac(0x15e)]})['eq']('id',_0x552503['id'])),_0x2de68b=await Promise[_0x26e5ac(0x141)](_0x11118d),_0x3ddd81=_0x2de68b['filter'](_0x18dca7=>_0x18dca7[_0x26e5ac(0x1fa)]);if(_0x3ddd81[_0x26e5ac(0x167)]>0x0)throw new Error(_0x3ddd81[_0x26e5ac(0x128)](_0xce882c=>_0xce882c[_0x26e5ac(0x1fa)]['message'])[_0xc89b8a(0x293)](',\x20'));_0x115457=_0x470d55[_0xc89b8a(0x2d3)];}}catch(_0x53c57b){_0x3e8a91=![],_0x2a9ccb=_0x53c57b['message'];}if(_0x3e8a91){let _0x9cc1b6='';if(_0x50e880>0x0)_0x9cc1b6+=_0x50e880+_0x26e5ac(0xeb);if(_0x115457>0x0)_0x9cc1b6+=_0x115457+_0xc89b8a(0x1f3);if(_0x50e880===0x0&&_0x115457===0x0)_0x9cc1b6=_0xc89b8a(0x2b4);alert(_0x9cc1b6[_0x26e5ac(0x103)]()),await logAction(_0x39e46a,_0x26e5ac(0x1ee)+_0x50e880+_0x26e5ac(0x201)+_0x115457+_0xc89b8a(0x252)),await _0x39e46a[_0xc89b8a(0x2ee)]();}else alert(_0x26e5ac(0x166)+_0x2a9ccb);}export async function handleEditArquiteto(_0x394969,_0x3cd3c8){const _0x43623e=a0_0x50b7,_0x354aa2=a0_0x4aad;_0x3cd3c8[_0x354aa2(0xfb)]();const _0x118caa=document[_0x43623e(0x1cc)](_0x354aa2(0x22c))[_0x354aa2(0x221)],_0x4cd3bb=_0x394969[_0x354aa2(0x16f)][_0x354aa2(0xff)](_0x37b103=>_0x37b103['id']===_0x118caa);if(!_0x4cd3bb)return;const _0x2f3891=document[_0x354aa2(0x1ab)](_0x354aa2(0xdf))[_0x354aa2(0x221)],_0x442e0a={'nome':document[_0x354aa2(0x1ab)](_0x354aa2(0x162))[_0x354aa2(0x221)],'email':document[_0x43623e(0x1cc)](_0x354aa2(0x169))[_0x354aa2(0x221)],'telefone':document[_0x43623e(0x1cc)](_0x354aa2(0x110))[_0x43623e(0x2c4)],'pix':document[_0x354aa2(0x1ab)](_0x43623e(0x1e8))[_0x354aa2(0x221)],'tipo_chave_pix':_0x2f3891||null,'salesCount':parseInt(document['getElementById'](_0x354aa2(0x1ec))[_0x354aa2(0x221)],0xa)||0x0,'rtPercentual':parseFloat(document[_0x354aa2(0x1ab)](_0x354aa2(0xe1))[_0x43623e(0x2c4)])};_0x394969['schemaHasRtAcumulado']&&_0x442e0a[_0x354aa2(0x10f)]!==_0x4cd3bb[_0x354aa2(0x10f)]&&(_0x442e0a['rt_acumulado']=(_0x4cd3bb[_0x43623e(0x20a)]||0x0)*_0x442e0a[_0x354aa2(0x10f)]-(_0x4cd3bb[_0x354aa2(0x189)]||0x0));const {data:_0x318280,error:_0x1e70ad}=await supabase[_0x354aa2(0x165)](_0x354aa2(0x16f))[_0x43623e(0x1fb)](_0x442e0a)['eq']('id',_0x118caa)[_0x354aa2(0x1f1)]()[_0x354aa2(0x1ad)]();if(_0x1e70ad)alert(_0x43623e(0x274)+_0x1e70ad[_0x354aa2(0x1aa)]);else{const _0xf181db=_0x394969[_0x354aa2(0x16f)][_0x354aa2(0x109)](_0x12e155=>_0x12e155['id']===_0x118caa);_0x394969[_0x354aa2(0x16f)][_0xf181db]={..._0x394969[_0x354aa2(0x16f)][_0xf181db],..._0x318280},await logAction(_0x394969,_0x354aa2(0x1df)+_0x442e0a[_0x354aa2(0x159)]+_0x43623e(0x2a7)+_0x118caa+')'),a0_0xa42681[_0x354aa2(0x218)](_0x394969),a0_0xa42681[_0x43623e(0x19a)]();}}export async function deleteArquiteto(_0x547e46,_0x1d5893){const _0x25a382=a0_0x50b7,_0x490474=a0_0x4aad,_0x37e198=_0x547e46[_0x490474(0x16f)][_0x25a382(0x2c8)](_0x3057bc=>_0x3057bc['id']===_0x1d5893);if(!_0x37e198)return;if(confirm('Tem\x20certeza\x20que\x20deseja\x20apagar\x20o\x20arquiteto\x20'+_0x37e198['nome']+_0x490474(0x200)+_0x1d5893+')?')){const {error:_0x5ea258}=await supabase['from'](_0x25a382(0x1e7))[_0x490474(0x183)]()['eq']('id',_0x1d5893);_0x5ea258?alert(_0x490474(0x10d)+_0x5ea258[_0x490474(0x1aa)]):(_0x547e46[_0x490474(0x16f)]=_0x547e46[_0x490474(0x16f)][_0x490474(0x13a)](_0x4a5d7d=>_0x4a5d7d['id']!==_0x1d5893),delete _0x547e46[_0x490474(0x177)][_0x1d5893],await logAction(_0x547e46,_0x490474(0x147)+_0x37e198[_0x490474(0x159)]+_0x490474(0x200)+_0x1d5893+')'),a0_0xa42681[_0x490474(0x218)](_0x547e46));}}export async function deleteAllArquitetos(_0x339cfb){const _0x5473c8=a0_0x50b7,_0x436a6e=a0_0x4aad;if(confirm(_0x5473c8(0x25f))){const [_0x4210f4,_0x14e970,_0x2eaa61,_0x5f5ae8]=await Promise[_0x436a6e(0x141)]([supabase[_0x5473c8(0x1fa)](_0x436a6e(0x16f))[_0x436a6e(0x183)]()[_0x436a6e(0x1b8)]('id','0'),supabase[_0x436a6e(0x165)](_0x436a6e(0x20d))[_0x436a6e(0x183)]()[_0x436a6e(0x1b8)]('id',0x0),supabase[_0x5473c8(0x1fa)](_0x436a6e(0x202))[_0x436a6e(0x183)]()[_0x436a6e(0x1b8)]('id',0x0),supabase[_0x436a6e(0x165)](_0x436a6e(0x209))[_0x5473c8(0x215)]()[_0x436a6e(0x1b8)]('id',0x0)]),_0x320932=[_0x4210f4[_0x436a6e(0x1fa)],_0x14e970[_0x5473c8(0x1c9)],_0x2eaa61[_0x436a6e(0x1fa)],_0x5f5ae8[_0x436a6e(0x1fa)]][_0x436a6e(0x13a)](Boolean);if(_0x320932[_0x5473c8(0x2d3)]>0x0)alert(_0x5473c8(0x2a4)+_0x320932[_0x5473c8(0x1c8)](_0x1cc2d7=>_0x1cc2d7[_0x436a6e(0x1aa)])['join']('\x0a'));else alert(_0x436a6e(0x1a7)),await logAction(_0x339cfb,_0x436a6e(0x101));await _0x339cfb[_0x436a6e(0x18c)](),a0_0xa42681[_0x436a6e(0x218)](_0x339cfb);}}export function exportArquitetosCSV(_0x410abe){const _0x4ad0ea=a0_0x50b7,_0x143c97=a0_0x4aad;if(_0x410abe[_0x143c97(0x16f)][_0x143c97(0x167)]===0x0){alert(_0x143c97(0x122));return;}const _0x2e0141=_0x410abe[_0x143c97(0x16f)][_0x143c97(0x128)](_0x347169=>{const _0x3df89d=a0_0x50b7,_0x7e9628=_0x143c97,_0x1151bb={'id':_0x347169['id'],'nome':_0x347169['nome'],'email':_0x347169[_0x7e9628(0x195)],'telefone':_0x347169[_0x7e9628(0x131)],'tipo_chave_pix':_0x347169[_0x3df89d(0x2a5)],'pix':_0x347169[_0x3df89d(0x21b)],'quantidade_vendas':_0x347169[_0x7e9628(0xe9)]||0x0,'valor_total_vendas':_0x347169[_0x7e9628(0x118)]||0x0,'pontos':_0x410abe[_0x7e9628(0x177)][_0x347169['id']]||0x0};if(_0x410abe[_0x7e9628(0x1a4)])_0x1151bb[_0x7e9628(0x14c)]=_0x347169[_0x7e9628(0x14c)]||0x0;if(_0x410abe['schemaHasRtTotalPago'])_0x1151bb[_0x7e9628(0x189)]=_0x347169[_0x7e9628(0x189)]||0x0;return _0x1151bb;}),_0xed2873=XLSX[_0x143c97(0x223)][_0x143c97(0x15c)](_0x2e0141),_0x4edfee=XLSX[_0x143c97(0x223)][_0x143c97(0x134)]();XLSX[_0x4ad0ea(0x1ec)][_0x143c97(0x1b6)](_0x4edfee,_0xed2873,_0x143c97(0x16e)),XLSX[_0x143c97(0x1b2)](_0x4edfee,_0x143c97(0x17f)),logAction(_0x410abe,'Exportou\x20a\x20lista\x20de\x20arquitetos\x20para\x20CSV.');}export async function handleAddValue(_0x1a10e8,_0x33aa69){const _0x152bfe=a0_0x50b7,_0x5a0362=a0_0x4aad;_0x33aa69[_0x152bfe(0x278)]();const _0x270a70=document[_0x152bfe(0x1cc)](_0x5a0362(0x10b))[_0x5a0362(0x221)],_0x242e90=parseFloat(document[_0x5a0362(0x1ab)]('add-value-input')[_0x152bfe(0x2c4)]),_0x3080be=_0x1a10e8[_0x5a0362(0x16f)][_0x5a0362(0xff)](_0x60385f=>_0x60385f['id']===_0x270a70);if(_0x3080be&&!isNaN(_0x242e90)){const _0x591803={'valorVendasTotal':(_0x3080be[_0x5a0362(0x118)]||0x0)+_0x242e90,'pontos':(_0x1a10e8[_0x5a0362(0x177)][_0x270a70]||0x0)+Math[_0x5a0362(0x100)](_0x242e90/0x3e8),'salesCount':(_0x3080be[_0x5a0362(0xe9)]||0x0)+0x1,..._0x1a10e8[_0x152bfe(0x204)]&&{'rt_acumulado':parseFloat(_0x3080be[_0x5a0362(0x14c)]||0x0)+_0x242e90*(_0x3080be[_0x5a0362(0x10f)]||0.05)}},{data:_0x1b7153,error:_0x15fdb1}=await supabase[_0x5a0362(0x165)]('arquitetos')[_0x5a0362(0x125)](_0x591803)['eq']('id',_0x270a70)[_0x5a0362(0x1f1)]()[_0x5a0362(0x1ad)]();if(_0x15fdb1)alert(_0x5a0362(0x181)+_0x15fdb1[_0x5a0362(0x1aa)]);else{const _0x293093=_0x1a10e8[_0x5a0362(0x16f)][_0x5a0362(0x109)](_0x4ada88=>_0x4ada88['id']===_0x270a70);_0x1a10e8[_0x5a0362(0x16f)][_0x293093]=_0x1b7153,_0x1a10e8[_0x5a0362(0x177)][_0x270a70]=_0x1b7153[_0x152bfe(0x1ac)],await logAction(_0x1a10e8,_0x5a0362(0xf3)+formatCurrency(_0x242e90)+'\x20para\x20'+_0x3080be[_0x5a0362(0x159)]+_0x5a0362(0x200)+_0x270a70+')'),a0_0xa42681[_0x5a0362(0x218)](_0x1a10e8),a0_0xa42681[_0x152bfe(0x2a9)]();}}}export async function handleAddPontos(_0x272141,_0x43a2a7){const _0x4ad286=a0_0x50b7,_0x2bf414=a0_0x4aad;_0x43a2a7['preventDefault']();const _0x4a009a=document[_0x2bf414(0x1ab)](_0x2bf414(0xe8))[_0x4ad286(0x2c4)],_0x3a06a3=parseInt(document[_0x2bf414(0x1ab)](_0x2bf414(0x205))[_0x4ad286(0x2c4)],0xa),_0x2d12f9=_0x272141[_0x2bf414(0x16f)][_0x2bf414(0xff)](_0xd6a576=>_0xd6a576['id']===_0x4a009a);if(_0x2d12f9&&!isNaN(_0x3a06a3)){const _0x5d459b=(_0x272141[_0x2bf414(0x177)][_0x4a009a]||0x0)+_0x3a06a3,{error:_0x377846}=await supabase[_0x2bf414(0x165)]('arquitetos')[_0x2bf414(0x125)]({'pontos':_0x5d459b})['eq']('id',_0x4a009a);_0x377846?alert(_0x2bf414(0x181)+_0x377846['message']):(_0x272141[_0x4ad286(0x211)][_0x4a009a]=_0x5d459b,_0x2d12f9[_0x2bf414(0x15b)]=_0x5d459b,await logAction(_0x272141,_0x4ad286(0x19c)+_0x3a06a3+_0x2bf414(0xed)+_0x2d12f9[_0x2bf414(0x159)]+_0x2bf414(0x200)+_0x4a009a+')'),a0_0xa42681['renderAll'](_0x272141),_0x43a2a7[_0x2bf414(0x123)][_0x4ad286(0x2ca)]());}}export function handlePagamentosChange(_0x105c41,_0x3d8db2){const _0x1d5bdf=a0_0x50b7,_0x1c12c6=a0_0x4aad,_0x5992bf=_0x3d8db2[_0x1c12c6(0x123)];if(!_0x5992bf[_0x1c12c6(0x1f2)](_0x1c12c6(0x1bf)))return;const _0x598277=_0x5992bf[_0x1d5bdf(0x2cb)](_0x1c12c6(0x13d));if(!_0x598277)return;const _0x4b0dc0=_0x598277['id']===_0x1c12c6(0x1a5)?_0x1c12c6(0x233):_0x1c12c6(0x15d),{id:_0x1dc172}=_0x5992bf[_0x1d5bdf(0x1bc)];_0x5992bf[_0x1c12c6(0x1f2)](_0x1c12c6(0x11f))&&updatePagamentoStatus(_0x105c41,_0x1dc172,_0x5992bf[_0x1c12c6(0x1bc)],_0x4b0dc0);if(_0x5992bf[_0x1c12c6(0x1f2)](_0x1c12c6(0x196))){const _0x4227b2=_0x5992bf[_0x1c12c6(0xf7)][_0x1d5bdf(0x262)](_0x1c12c6(0x126));_0x5992bf['files'][_0x1c12c6(0x167)]>0x0&&_0x4227b2&&(_0x4227b2[_0x1c12c6(0x216)]=_0x1c12c6(0x161),_0x4227b2[_0x1d5bdf(0x28c)]=_0x1c12c6(0x1a8)),handleComprovanteUpload(_0x105c41,_0x1dc172,_0x5992bf[_0x1c12c6(0x150)][0x0],_0x4b0dc0);}}export function handlePagamentosClick(_0x3692e8,_0x1890f4){const _0x5acaf7=a0_0x50b7,_0x3f9fb9=a0_0x4aad,_0x1e3f33=_0x1890f4[_0x3f9fb9(0x123)][_0x3f9fb9(0xf0)](_0x3f9fb9(0x160));if(!_0x1e3f33)return;const _0x153c56=_0x1e3f33['closest'](_0x3f9fb9(0x13d));if(!_0x153c56)return;const _0x230225=_0x153c56['id']===_0x3f9fb9(0x1a5)?_0x3f9fb9(0x233):_0x5acaf7(0x1e5),{date:_0x9385c,id:_0x58f010}=_0x1e3f33[_0x3f9fb9(0x1b4)];_0x1e3f33[_0x3f9fb9(0x1f2)](_0x3f9fb9(0x1d4))&&!_0x1e3f33[_0x3f9fb9(0x17e)]&&(_0x1890f4[_0x3f9fb9(0xfb)](),a0_0xa42681[_0x3f9fb9(0x1d6)](_0x3692e8,_0x58f010,_0x230225)),_0x1e3f33[_0x3f9fb9(0x1f2)]('.edit-rt-btn')&&a0_0xa42681[_0x3f9fb9(0x180)](_0x3692e8,_0x58f010,_0x230225);if(_0x230225===_0x5acaf7(0x1e5)){if(_0x1e3f33[_0x5acaf7(0x219)](_0x3f9fb9(0x22d)))deletePagamentosGroup(_0x3692e8,_0x9385c);if(_0x1e3f33[_0x3f9fb9(0x1f2)]('.download-xlsx-btn'))exportPagamentosXLSX(_0x3692e8,_0x9385c);if(_0x1e3f33[_0x3f9fb9(0x1f2)](_0x5acaf7(0x251)))generatePagamentoPrint(_0x3692e8,_0x9385c);}}export async function updatePagamentoStatus(_0x474b10,_0x42ae5b,_0x36c2e2,_0x3f4b74){const _0x4c882d=a0_0x50b7,_0x26e87d=a0_0x4aad;let _0x518630;_0x3f4b74===_0x26e87d(0x233)?_0x518630=_0x474b10[_0x26e87d(0x1f0)][_0x26e87d(0xff)](_0x5873d5=>_0x5873d5['id'][_0x26e87d(0x19c)]()===_0x42ae5b):_0x518630=Object[_0x26e87d(0x157)](_0x474b10[_0x26e87d(0x20d)])[_0x26e87d(0x18e)]()[_0x26e87d(0xff)](_0x4b7709=>_0x4b7709['id'][_0x26e87d(0x19c)]()===_0x42ae5b);if(_0x518630){const {error:_0x547807}=await supabase[_0x26e87d(0x165)](_0x26e87d(0x20d))[_0x26e87d(0x125)]({'pago':_0x36c2e2})['eq']('id',_0x518630['id']);if(_0x547807)alert(_0x26e87d(0x181)+_0x547807[_0x26e87d(0x1aa)]);else _0x518630[_0x26e87d(0xfe)]=_0x36c2e2,await logAction(_0x474b10,_0x26e87d(0x230)+_0x3f4b74+'\x20(ID:\x20'+_0x42ae5b+_0x26e87d(0xea)+_0x518630[_0x26e87d(0xe4)]+_0x4c882d(0x243)+(_0x36c2e2?_0x26e87d(0x12e):_0x26e87d(0x22a))+'.'),a0_0xa42681[_0x4c882d(0x2ae)](_0x474b10);}}export async function handleComprovanteUpload(_0x3c3622,_0x567042,_0x1cfe1a,_0x1b16b2){const _0x138025=a0_0x50b7,_0x32d892=a0_0x4aad;if(!_0x1cfe1a)return;let _0x26923b;_0x1b16b2===_0x32d892(0x233)?_0x26923b=_0x3c3622[_0x32d892(0x1f0)][_0x32d892(0xff)](_0x5d968a=>_0x5d968a['id'][_0x32d892(0x19c)]()===_0x567042):_0x26923b=Object[_0x32d892(0x157)](_0x3c3622[_0x138025(0x19d)])[_0x32d892(0x18e)]()[_0x32d892(0xff)](_0x36274c=>_0x36274c['id'][_0x32d892(0x19c)]()===_0x567042);if(_0x26923b){const _0x43e9c1=await fileToBase64(_0x1cfe1a);_0x26923b[_0x32d892(0x148)]={'name':_0x1cfe1a[_0x32d892(0x232)],'url':_0x43e9c1};const {error:_0x3348e3}=await supabase[_0x32d892(0x165)](_0x32d892(0x20d))[_0x32d892(0x125)]({'comprovante':_0x26923b[_0x32d892(0x148)]})['eq']('id',_0x26923b['id']);if(_0x3348e3)alert(_0x32d892(0x181)+_0x3348e3[_0x32d892(0x1aa)]);else await logAction(_0x3c3622,_0x32d892(0x116)+_0x1b16b2+_0x32d892(0x200)+_0x567042+_0x32d892(0x22b)+_0x26923b[_0x32d892(0xe4)]+'.');}}export async function deletePagamentosGroup(_0x1e186d,_0x2196a1){const _0x50d458=a0_0x4aad;if(confirm(_0x50d458(0x1db)+_0x2196a1+'?')){const _0x3a5305=_0x1e186d[_0x50d458(0x20d)][_0x2196a1][_0x50d458(0x128)](_0x4d3959=>_0x4d3959['id']),{error:_0x1761cc}=await supabase['from'](_0x50d458(0x20d))[_0x50d458(0x183)]()['in']('id',_0x3a5305);_0x1761cc?alert(_0x50d458(0x181)+_0x1761cc[_0x50d458(0x1aa)]):(delete _0x1e186d[_0x50d458(0x20d)][_0x2196a1],await logAction(_0x1e186d,_0x50d458(0x13f)+_0x2196a1+'.'),a0_0xa42681[_0x50d458(0x218)](_0x1e186d));}}export async function handleUpdateRtValue(_0x30b646,_0x5f52c5){const _0xb318d6=a0_0x50b7,_0x167c4d=a0_0x4aad;_0x5f52c5[_0xb318d6(0x278)]();const _0x1a9f8e=_0x5f52c5[_0x167c4d(0x123)],_0x51a29d=document[_0x167c4d(0x1ab)](_0x167c4d(0x10e))[_0x167c4d(0x221)],_0x1753f5=_0x1a9f8e[_0xb318d6(0x1bc)][_0xb318d6(0x217)],_0x549ce1=parseFloat(document[_0x167c4d(0x1ab)](_0x167c4d(0x15f))[_0x167c4d(0x221)]);if(isNaN(_0x549ce1)||_0x549ce1<0x0){alert(_0x167c4d(0x1ff));return;}let _0x40aa22;_0x1753f5===_0x167c4d(0x233)?_0x40aa22=_0x30b646[_0x167c4d(0x1f0)]['find'](_0x507e38=>_0x507e38['id'][_0xb318d6(0x1f0)]()===_0x51a29d):_0x40aa22=Object[_0x167c4d(0x157)](_0x30b646[_0x167c4d(0x20d)])[_0x167c4d(0x18e)]()[_0xb318d6(0x2c8)](_0x5c7e91=>_0x5c7e91['id']['toString']()===_0x51a29d);if(_0x40aa22){const _0x4aa066=_0x40aa22[_0x167c4d(0x1f5)],{error:_0x835755}=await supabase[_0x167c4d(0x165)](_0x167c4d(0x20d))[_0xb318d6(0x1fb)]({'rt_valor':_0x549ce1})['eq']('id',_0x40aa22['id']);_0x835755?alert(_0x167c4d(0x181)+_0x835755[_0x167c4d(0x1aa)]):(_0x40aa22[_0xb318d6(0x26b)]=_0x549ce1,await logAction(_0x30b646,_0x167c4d(0x231)+_0x1753f5+_0x167c4d(0x200)+_0x51a29d+_0x167c4d(0x22b)+formatCurrency(_0x4aa066)+_0x167c4d(0x211)+formatCurrency(_0x549ce1)+'.'),a0_0xa42681[_0x167c4d(0x218)](_0x30b646),a0_0xa42681[_0x167c4d(0x14e)]());}}export function exportPagamentosXLSX(_0x15463c,_0x2dc9d3){const _0x2ff4e3=a0_0x50b7,_0x48c959=a0_0x4aad,_0x3390ad=_0x15463c[_0x48c959(0x20d)][_0x2dc9d3];if(!_0x3390ad||_0x3390ad[_0x2ff4e3(0x2d3)]===0x0){alert(_0x48c959(0x22e));return;}const _0x44591f=_0x3390ad[_0x48c959(0x128)](_0x1ee9b7=>({'ID\x20Parceiro':_0x1ee9b7[_0x48c959(0x235)],'Parceiro':_0x1ee9b7['parceiro'],'Consultor':_0x1ee9b7[_0x2ff4e3(0x2a6)]||'','Valor\x20RT':parseCurrency(_0x1ee9b7[_0x48c959(0x1f5)]),'Pago':_0x1ee9b7[_0x48c959(0xfe)]?_0x2ff4e3(0x2e4):_0x48c959(0x121),'Data\x20Geração':_0x1ee9b7[_0x2ff4e3(0x198)]})),_0x45320b=XLSX[_0x48c959(0x223)]['json_to_sheet'](_0x44591f),_0xb8713a=XLSX[_0x48c959(0x223)][_0x48c959(0x134)]();XLSX[_0x48c959(0x223)]['book_append_sheet'](_0xb8713a,_0x45320b,_0x48c959(0x199)),XLSX[_0x48c959(0x1b2)](_0xb8713a,_0x48c959(0x13c)+_0x2dc9d3[_0x2ff4e3(0x1f7)](/\//g,'-')+'.xlsx'),logAction(_0x15463c,_0x48c959(0x17c)+_0x2dc9d3+'.');}export function generatePagamentoPrint(_0x391cd3,_0x2f2237){const _0x5ebf87=a0_0x50b7,_0x2787d3=a0_0x4aad,_0x134f87=_0x391cd3[_0x2787d3(0x20d)][_0x2f2237];if(!_0x134f87||_0x134f87[_0x5ebf87(0x2d3)]===0x0){alert(_0x5ebf87(0x1c7));return;}const _0x315d74=_0x134f87[_0x2787d3(0x20f)]((_0x373c45,_0x49d908)=>_0x373c45+parseCurrency(_0x49d908[_0x2787d3(0x1f5)]||0x0),0x0),_0x3115a9=_0x134f87[_0x2787d3(0x135)]((_0x458b4e,_0x4747cb)=>_0x458b4e[_0x2787d3(0xe4)][_0x2787d3(0x140)](_0x4747cb[_0x2787d3(0xe4)]))[_0x5ebf87(0x1c8)](_0x19d23d=>{const _0x442ada=_0x5ebf87,_0x17b2f4=_0x2787d3,_0x20c330=_0x391cd3[_0x442ada(0x1e7)][_0x17b2f4(0xff)](_0xd040a3=>_0xd040a3['id']===_0x19d23d[_0x17b2f4(0x235)]),_0x18655c=_0x20c330?((_0x20c330[_0x17b2f4(0x15e)]||'')+'\x20'+(_0x20c330[_0x442ada(0x21b)]||_0x17b2f4(0x163)))[_0x17b2f4(0x103)]():_0x17b2f4(0x220);return _0x442ada(0x1d0)+_0x19d23d['id_parceiro']+_0x17b2f4(0x214)+_0x19d23d[_0x17b2f4(0xe4)]+_0x17b2f4(0x214)+_0x18655c+_0x17b2f4(0x214)+(_0x19d23d[_0x17b2f4(0x156)]||'')+_0x17b2f4(0x1c1)+formatCurrency(_0x19d23d[_0x442ada(0x26b)])+_0x17b2f4(0x1a1);})[_0x2787d3(0x1de)](''),_0x1ada1b=_0x5ebf87(0x1d5)+_0x2f2237+_0x2787d3(0x105)+_0x3115a9+_0x5ebf87(0x22d),_0x3bf092=_0x2787d3(0x104)+_0x2f2237+_0x2787d3(0x1fd)+_0x1ada1b+_0x5ebf87(0x2c3)+formatCurrency(_0x315d74)+_0x2787d3(0x18d),_0x55b224=window[_0x2787d3(0x1d1)]('',_0x2787d3(0x1cb));_0x55b224[_0x2787d3(0xde)][_0x2787d3(0x1ae)](_0x3bf092),_0x55b224[_0x2787d3(0xde)][_0x5ebf87(0x1e1)]();}export async function handleGerarPagamentosClick(_0xd16915){const _0x24f16d=a0_0x50b7,_0x4b9f14=a0_0x4aad;if(!_0xd16915[_0x4b9f14(0x1a4)]||!_0xd16915[_0x4b9f14(0x132)]){alert(_0x4b9f14(0x178));return;}const {data:_0x9259d,error:_0x3ad601}=await supabase[_0x4b9f14(0x165)](_0x4b9f14(0x16f))[_0x24f16d(0x28b)]('*');if(_0x3ad601){alert(_0x4b9f14(0x213));return;}_0xd16915[_0x4b9f14(0x16f)]=_0x9259d||[],_0xd16915['eligibleForPayment']=_0xd16915[_0x4b9f14(0x16f)][_0x24f16d(0x1bd)](_0x2092e9=>parseFloat(_0x2092e9[_0x4b9f14(0x14c)]||0x0)>=0x12c);if(_0xd16915[_0x24f16d(0x2b1)][_0x4b9f14(0x167)]===0x0){alert(_0x4b9f14(0x120));return;}a0_0xa42681[_0x4b9f14(0x20a)](_0xd16915);}export async function confirmarGeracaoComprovantes(_0x1906a1){const _0x271910=a0_0x50b7,_0x160ef1=a0_0x4aad;if(_0x1906a1[_0x271910(0x2b1)][_0x160ef1(0x167)]===0x0)return;const _0x339c95=_0x1906a1[_0x160ef1(0x15a)]['map'](_0x102925=>_0x102925['id']),{data:_0x2a4a03,error:_0x205622}=await supabase[_0x271910(0x1fa)](_0x160ef1(0x1b1))[_0x160ef1(0x1f1)](_0x160ef1(0x12a))['in'](_0x160ef1(0x235),_0x339c95)[_0x160ef1(0x210)]('data_finalizacao_prevenda',{'ascending':![]});if(_0x205622){alert(_0x160ef1(0x19e)+_0x205622[_0x271910(0x254)]);return;}const _0x3f37bb={};if(_0x2a4a03)for(const _0x5f8fe of _0x2a4a03){!_0x3f37bb[_0x5f8fe[_0x160ef1(0x235)]]&&(_0x3f37bb[_0x5f8fe[_0x160ef1(0x235)]]=_0x5f8fe[_0x160ef1(0x156)]);}const _0x471f47=new Date()[_0x160ef1(0x13b)]()[_0x160ef1(0x174)](0x0,0xa),_0x2cf7c4=_0x1906a1[_0x160ef1(0x15a)][_0x160ef1(0x128)](_0x3d57ff=>({'id_parceiro':_0x3d57ff['id'],'parceiro':_0x3d57ff[_0x160ef1(0x159)],'rt_valor':_0x3d57ff[_0x271910(0x1d6)],'pago':![],'data_geracao':_0x471f47,'consultor':_0x3f37bb[_0x3d57ff['id']]||null,'form_pagamento':0x1})),{error:_0x22ff65}=await supabase[_0x271910(0x1fa)](_0x160ef1(0x20d))[_0x271910(0x2b7)](_0x2cf7c4);if(_0x22ff65){alert(_0x160ef1(0x1ac)+_0x22ff65[_0x160ef1(0x1aa)]);return;}const _0x368b19=_0x1906a1[_0x160ef1(0x15a)][_0x160ef1(0x128)](_0x5880a5=>supabase[_0x271910(0x1fa)](_0x160ef1(0x16f))[_0x160ef1(0x125)]({'rt_acumulado':0x0,'rt_total_pago':(parseFloat(_0x5880a5[_0x160ef1(0x189)])||0x0)+(parseFloat(_0x5880a5[_0x160ef1(0x14c)])||0x0)})['eq']('id',_0x5880a5['id']));await Promise[_0x160ef1(0x141)](_0x368b19),alert(_0x1906a1['eligibleForPayment'][_0x271910(0x2d3)]+_0x271910(0x1db)),await logAction(_0x1906a1,_0x160ef1(0x222)+_0x1906a1[_0x160ef1(0x15a)][_0x160ef1(0x167)]+_0x160ef1(0x1a0)),await _0x1906a1[_0x160ef1(0x18c)](),a0_0xa42681[_0x271910(0x2ae)](_0x1906a1),a0_0xa42681[_0x160ef1(0x17d)]();}export async function handleGerarPagamentoFicha(_0x4b07c3){const _0x478bb7=a0_0x50b7,_0x3b0b26=a0_0x4aad,_0x11c947=document[_0x478bb7(0x1cc)]('edit-arquiteto-original-id')[_0x3b0b26(0x221)],_0x4deceb=_0x4b07c3[_0x3b0b26(0x16f)][_0x3b0b26(0xff)](_0x140b1c=>_0x140b1c['id']===_0x11c947);if(!_0x4deceb){alert(_0x3b0b26(0x1c5));return;}const _0x33acaa=parseFloat(_0x4deceb['rt_acumulado']||0x0);if(_0x33acaa<=0x0){alert(_0x3b0b26(0x219));return;}if(confirm(_0x478bb7(0x231)+formatCurrency(_0x33acaa)+_0x3b0b26(0x211)+_0x4deceb[_0x3b0b26(0x159)]+_0x3b0b26(0xf9))){const {data:_0xc8b9c7,error:_0x2e3087}=await supabase[_0x3b0b26(0x165)](_0x3b0b26(0x1b1))[_0x3b0b26(0x1f1)](_0x3b0b26(0x156))['eq'](_0x3b0b26(0x235),_0x4deceb['id'])[_0x3b0b26(0x210)](_0x3b0b26(0x1e7),{'ascending':![]})[_0x478bb7(0x225)](0x1)[_0x3b0b26(0x1ad)]();_0x2e3087&&_0x2e3087[_0x478bb7(0x2e0)]!==_0x3b0b26(0x1be)&&console[_0x478bb7(0x1c9)](_0x3b0b26(0x1cf),_0x2e3087);const _0x5d24b9=_0xc8b9c7?_0xc8b9c7['consultor']:null,_0x25a6d0=new Date()[_0x3b0b26(0x13b)]()[_0x478bb7(0x1a5)](0x0,0xa),{error:_0xdcc997}=await supabase[_0x3b0b26(0x165)](_0x478bb7(0x19d))[_0x3b0b26(0x21d)]([{'id_parceiro':_0x4deceb['id'],'parceiro':_0x4deceb[_0x3b0b26(0x159)],'rt_valor':_0x33acaa,'pago':![],'data_geracao':_0x25a6d0,'consultor':_0x5d24b9,'form_pagamento':0x1}]);if(_0xdcc997){alert(_0x3b0b26(0xfc)+_0xdcc997[_0x3b0b26(0x1aa)]);return;}const {error:_0xd44875}=await supabase[_0x3b0b26(0x165)](_0x3b0b26(0x16f))[_0x3b0b26(0x125)]({'rt_acumulado':0x0,'rt_total_pago':(parseFloat(_0x4deceb['rt_total_pago'])||0x0)+_0x33acaa})['eq']('id',_0x4deceb['id']);if(_0xd44875)alert(_0x3b0b26(0xf4)+_0xd44875[_0x3b0b26(0x1aa)]);else alert(_0x478bb7(0x25a)+_0x4deceb[_0x3b0b26(0x159)]+'!'),await logAction(_0x4b07c3,_0x3b0b26(0x1a9)+formatCurrency(_0x33acaa)+_0x3b0b26(0x211)+_0x4deceb[_0x3b0b26(0x159)]+_0x3b0b26(0x200)+_0x11c947+').');await _0x4b07c3[_0x3b0b26(0x18c)](),a0_0xa42681[_0x3b0b26(0x218)](_0x4b07c3),a0_0xa42681[_0x3b0b26(0x1d2)]();}}export async function handleGerarResgateFicha(_0x32c572){const _0x35844f=a0_0x50b7,_0x3e94e0=a0_0x4aad;console[_0x3e94e0(0x113)](_0x3e94e0(0x143));const _0x43691f=document[_0x3e94e0(0x1ab)](_0x3e94e0(0x22c))[_0x3e94e0(0x221)],_0x3b1fdc=_0x32c572[_0x3e94e0(0x16f)][_0x3e94e0(0xff)](_0x4f90ca=>_0x4f90ca['id']===_0x43691f);if(!_0x3b1fdc){console[_0x3e94e0(0x1fa)](_0x35844f(0x197),_0x43691f),alert(_0x3e94e0(0x1c5));return;}console['log'](_0x3e94e0(0x1bd),_0x3b1fdc);const _0x3e4a09=parseFloat(_0x3b1fdc[_0x3e94e0(0x14c)]||0x0);console[_0x3e94e0(0x113)](_0x3e94e0(0x1af),_0x3e4a09);if(_0x3e4a09<=0x0){alert(_0x3e94e0(0x1b7));return;}if(confirm(_0x3e94e0(0x1f6)+formatCurrency(_0x3e4a09)+_0x35844f(0x2d2)+_0x3b1fdc[_0x3e94e0(0x159)]+_0x3e94e0(0xf9))){console[_0x3e94e0(0x113)](_0x3e94e0(0x208));const {data:_0x5c20e3,error:_0x182691}=await supabase[_0x3e94e0(0x165)](_0x3e94e0(0x1b1))[_0x3e94e0(0x1f1)](_0x3e94e0(0x156))['eq'](_0x3e94e0(0x235),_0x3b1fdc['id'])[_0x3e94e0(0x210)](_0x3e94e0(0x1e7),{'ascending':![]})[_0x3e94e0(0x1e2)](0x1)[_0x3e94e0(0x1ad)]();_0x182691&&_0x182691[_0x35844f(0x2e0)]!==_0x3e94e0(0x1be)&&console[_0x3e94e0(0x1fa)](_0x3e94e0(0x175),_0x182691);const _0x5a77f1=_0x5c20e3?_0x5c20e3[_0x3e94e0(0x156)]:null;console[_0x35844f(0x1f8)](_0x3e94e0(0x136),_0x5a77f1);const _0xceb5cf=new Date()[_0x35844f(0x1f4)]()[_0x3e94e0(0x174)](0x0,0xa),_0x2b51b7={'id_parceiro':_0x3b1fdc['id'],'parceiro':_0x3b1fdc['nome'],'rt_valor':_0x3e4a09,'pago':![],'data_geracao':_0xceb5cf,'consultor':_0x5a77f1,'form_pagamento':0x2};console[_0x3e94e0(0x113)](_0x3e94e0(0x1cc),_0x2b51b7);const {error:_0x159591}=await supabase[_0x3e94e0(0x165)](_0x3e94e0(0x20d))[_0x3e94e0(0x21d)]([_0x2b51b7]);if(_0x159591){console[_0x3e94e0(0x1fa)]('handleGerarResgateFicha:\x20Erro\x20ao\x20inserir\x20resgate\x20no\x20Supabase:',_0x159591),alert(_0x35844f(0x1a3)+_0x159591[_0x35844f(0x254)]);return;}console[_0x3e94e0(0x113)](_0x3e94e0(0x153));const _0x2636d2={'rt_acumulado':0x0,'rt_total_pago':(parseFloat(_0x3b1fdc[_0x3e94e0(0x189)])||0x0)+_0x3e4a09};console[_0x3e94e0(0x113)](_0x3e94e0(0x139),_0x2636d2);const {error:_0xd04b9b}=await supabase[_0x3e94e0(0x165)](_0x3e94e0(0x16f))[_0x3e94e0(0x125)](_0x2636d2)['eq']('id',_0x3b1fdc['id']);_0xd04b9b?(console[_0x3e94e0(0x1fa)](_0x3e94e0(0x1d3),_0xd04b9b),alert(_0x3e94e0(0x115)+_0xd04b9b[_0x35844f(0x254)])):(console[_0x3e94e0(0x113)](_0x3e94e0(0x203)),alert(_0x3e94e0(0x194)+formatCurrency(_0x3e4a09)+_0x35844f(0x240)+_0x3b1fdc['nome']+'!'),await logAction(_0x32c572,_0x3e94e0(0x144)+formatCurrency(_0x3e4a09)+_0x3e94e0(0x211)+_0x3b1fdc[_0x3e94e0(0x159)]+_0x3e94e0(0x200)+_0x43691f+').')),await _0x32c572[_0x3e94e0(0x18c)](),a0_0xa42681[_0x3e94e0(0x218)](_0x32c572),a0_0xa42681[_0x35844f(0x19a)]();}}export async function fetchSysledData(_0x231e6e){const _0x11b13e=a0_0x50b7,_0x31afd2=a0_0x4aad,_0x4e2829=document[_0x31afd2(0x1ab)](_0x11b13e(0x1c1));_0x4e2829[_0x11b13e(0x299)]=_0x11b13e(0x212);try{const _0xce828a=await fetch(_0x31afd2(0x191),{'headers':{'Authorization':_0x31afd2(0x14f)}});if(!_0xce828a['ok'])throw new Error(_0x31afd2(0x1ed)+_0xce828a[_0x11b13e(0x270)]);_0x231e6e['sysledData']=await _0xce828a[_0x11b13e(0x2e1)](),await logAction(_0x231e6e,_0x31afd2(0x17b));}catch(_0x1c6fb5){console[_0x31afd2(0x1fa)]('Erro\x20na\x20API\x20Sysled:',_0x1c6fb5),_0x4e2829[_0x31afd2(0x227)]=_0x11b13e(0x298);}finally{a0_0xa42681[_0x31afd2(0x226)](_0x231e6e);}}export function clearSysledFilters(_0x21bf9d){const _0x3fa79b=a0_0x50b7,_0x7836b2=a0_0x4aad;document[_0x7836b2(0x1ab)](_0x7836b2(0x124))[_0x7836b2(0x221)]='',document[_0x7836b2(0x1ab)]('sysled-filter-data-fim')[_0x7836b2(0x221)]='',document[_0x7836b2(0x1ab)](_0x7836b2(0x12f))[_0x7836b2(0x221)]='',document[_0x3fa79b(0x1cc)](_0x3fa79b(0x1c6))[_0x7836b2(0x221)]='',a0_0xa42681[_0x3fa79b(0x20e)](_0x21bf9d);}export async function handleCopyToRTClick(_0x5ce250){const _0x22f529=a0_0x50b7,_0x598d3b=a0_0x4aad;if(_0x5ce250[_0x22f529(0x21c)][_0x598d3b(0x167)]===0x0){alert(_0x598d3b(0x22f));return;}if(!confirm('Você\x20está\x20prestes\x20a\x20importar\x20'+_0x5ce250[_0x598d3b(0x1c7)][_0x598d3b(0x167)]+_0x598d3b(0x14d)))return;_0x5ce250[_0x598d3b(0x207)]=!![],_0x5ce250[_0x598d3b(0x179)]=_0x5ce250[_0x598d3b(0x1c7)];const _0x1e2c54={'id_prevenda':_0x22f529(0x208),'data_venda':_0x598d3b(0x18a),'nome_cliente':_0x22f529(0x25d),'valor_venda':_0x22f529(0x199),'executivo':_0x598d3b(0x156),'id_parceiro':'idParceiro','parceiro':_0x598d3b(0xe4),'loja':_0x598d3b(0x1c6)},_0x3ca30a=_0x5ce250[_0x22f529(0x2a0)][0x0];if(!_0x3ca30a[_0x22f529(0x244)](_0x1e2c54[_0x598d3b(0x235)])||!_0x3ca30a[_0x598d3b(0x142)](_0x1e2c54[_0x598d3b(0x186)])||!_0x3ca30a[_0x598d3b(0x142)](_0x1e2c54[_0x22f529(0x222)])){alert(_0x22f529(0x250)),_0x5ce250[_0x598d3b(0x207)]=![];return;}let _0x196507=_0x5ce250[_0x598d3b(0x179)][_0x598d3b(0x128)](_0x5d65ee=>{const _0x581964=_0x598d3b,_0x41bba8={};for(const _0x222560 in _0x1e2c54){_0x5d65ee[_0x581964(0x142)](_0x1e2c54[_0x222560])&&(_0x222560===_0x581964(0x186)?_0x41bba8[_0x222560]=parseApiNumber(_0x5d65ee[_0x1e2c54[_0x222560]]):_0x41bba8[_0x222560]=_0x5d65ee[_0x1e2c54[_0x222560]]);}return _0x41bba8;});const _0x2149aa=await verificarArquitetosNaoCadastrados(_0x5ce250,_0x196507);if(_0x2149aa[_0x598d3b(0x167)]>0x0){_0x5ce250[_0x598d3b(0x10c)]=_0x196507,a0_0xa42681[_0x598d3b(0x19d)](_0x5ce250,_0x2149aa[0x0]);return;}let _0x20ebd2=_0x196507;const _0x56e189=_0x196507[_0x598d3b(0x128)](_0x534930=>_0x534930[_0x598d3b(0x1ea)])[_0x598d3b(0x13a)](_0x18c038=>_0x18c038);if(_0x56e189[_0x22f529(0x2d3)]>0x0){const {data:_0x557e35,error:_0x547f74}=await supabase[_0x598d3b(0x165)](_0x22f529(0x2ad))[_0x22f529(0x28b)](_0x22f529(0x23d))['in'](_0x22f529(0x23d),_0x56e189);if(_0x547f74){alert(_0x598d3b(0x176)+_0x547f74[_0x598d3b(0x1aa)]),_0x5ce250[_0x598d3b(0x207)]=![];return;}const _0x11c400=new Set(_0x557e35[_0x598d3b(0x128)](_0x2423fe=>String(_0x2423fe[_0x598d3b(0x14a)]))),_0x794bb5=_0x196507[_0x598d3b(0x13a)](_0x171f01=>_0x11c400[_0x598d3b(0x1fc)](String(_0x171f01[_0x22f529(0x222)])));_0x20ebd2=_0x196507[_0x598d3b(0x13a)](_0x103dcf=>!_0x11c400[_0x598d3b(0x1fc)](String(_0x103dcf[_0x598d3b(0x1ea)]))),_0x794bb5[_0x598d3b(0x167)]>0x0&&alert(_0x598d3b(0xf6)+_0x794bb5[_0x598d3b(0x128)](_0x16bc87=>_0x16bc87[_0x598d3b(0x1ea)])[_0x598d3b(0x1de)](',\x20'));}_0x20ebd2['length']>0x0?await processRTData(_0x5ce250,_0x20ebd2):(alert(_0x598d3b(0x137)),_0x5ce250[_0x598d3b(0x207)]=![]);}export async function handleConsultarVendasClick(_0x35c02a,_0x4ea500,_0x1146c7){const _0x31bf85=a0_0x50b7,_0x908d48=a0_0x4aad;_0x4ea500[_0x908d48(0xfb)]();if(!_0x1146c7)return;const _0x52d3a0=_0x35c02a[_0x908d48(0x16f)]['find'](_0x5a300b=>_0x5a300b['id']===_0x1146c7);document[_0x908d48(0x1ab)](_0x908d48(0x16d))[_0x908d48(0x216)]=_0x908d48(0x168)+(_0x52d3a0?_0x52d3a0[_0x31bf85(0x284)]:_0x1146c7);const _0xf694dc=document[_0x908d48(0x1ab)](_0x31bf85(0x2e2));_0xf694dc[_0x908d48(0x227)]=_0x908d48(0x12c);const _0xba6671=document[_0x31bf85(0x1cc)](_0x908d48(0x112));_0xba6671[_0x908d48(0x114)][_0x908d48(0xdd)](_0x31bf85(0x23f));try{const {data:_0xc039ef,error:_0x42f115}=await supabase[_0x31bf85(0x1fa)](_0x908d48(0x1b1))[_0x908d48(0x1f1)](_0x908d48(0xfa))['eq'](_0x31bf85(0x29d),_0x1146c7)[_0x908d48(0x210)](_0x908d48(0x1e7),{'ascending':![]});if(_0x42f115)throw _0x42f115;a0_0xa42681[_0x908d48(0x234)](_0xc039ef,!![]);}catch(_0x3fc6b7){console[_0x908d48(0x1fa)](_0x31bf85(0x29c),_0x3fc6b7),_0xf694dc[_0x908d48(0x227)]=_0x908d48(0x11b);}}export function handleSalesHistoryTableClick(_0x3dc233,_0xccb717){const _0x21f857=a0_0x50b7,_0x131c09=a0_0x4aad,_0x2feb83=_0xccb717[_0x131c09(0x123)][_0x21f857(0x2cb)](_0x21f857(0x2b8));_0x2feb83&&(_0xccb717[_0x131c09(0xfb)](),a0_0xa42681[_0x131c09(0x182)](_0x3dc233,_0x2feb83[_0x131c09(0x1b4)][_0x131c09(0x1bb)]));}export async function handleImportSingleSale(_0x53590c,_0x2be52f){const _0xe86f5f=a0_0x50b7,_0x27f2fd=a0_0x4aad,_0x1eed65=_0x2be52f[_0x27f2fd(0x123)][_0x27f2fd(0x1b4)][_0xe86f5f(0x1a7)];if(!_0x1eed65||_0x1eed65===_0x27f2fd(0xf1))return;const {data:_0x5c4410}=await supabase[_0x27f2fd(0x165)](_0x27f2fd(0x1b1))['select'](_0xe86f5f(0x23d))['eq'](_0x27f2fd(0x14a),_0x1eed65)[_0x27f2fd(0x1c4)]();if(_0x5c4410){alert(_0x27f2fd(0x1dd)+_0x1eed65+_0x27f2fd(0x18f));return;}const _0x50839b=_0x53590c[_0x27f2fd(0x1c3)][_0x27f2fd(0xff)](_0x5f4855=>String(_0x5f4855[_0x27f2fd(0x212)])===_0x1eed65);if(!_0x50839b){alert(_0x27f2fd(0x1e8));return;}const _0x24af66=[{'id_parceiro':_0x50839b[_0xe86f5f(0x288)],'valor_venda':parseApiNumber(_0x50839b[_0x27f2fd(0xf5)]),'parceiro':_0x50839b[_0x27f2fd(0xe4)]}];_0x53590c[_0x27f2fd(0x207)]=![],await processRTData(_0x53590c,_0x24af66);const {error:_0xc14294}=await supabase[_0x27f2fd(0x165)](_0xe86f5f(0x2ad))[_0x27f2fd(0x21d)]([{'id_parceiro':_0x50839b[_0x27f2fd(0x1b5)],'valor_nota':parseApiNumber(_0x50839b[_0x27f2fd(0xf5)]),'data_finalizacao_prevenda':_0x50839b[_0x27f2fd(0x18a)],'id_pedido':_0x50839b[_0x27f2fd(0x212)]}]);if(_0xc14294)console[_0x27f2fd(0x1fa)](_0x27f2fd(0x21f),_0xc14294);a0_0xa42681[_0x27f2fd(0x127)]();}export function handleSort(_0x2458ae,_0x2718ac){const _0x1187dc=a0_0x50b7,_0x23ae99=a0_0x4aad,_0x3a6a9e=_0x2718ac[_0x23ae99(0x123)]['closest'](_0x23ae99(0x1ca));if(!_0x3a6a9e)return;const _0xc70f4=_0x3a6a9e[_0x1187dc(0x1bc)][_0x23ae99(0x135)];_0x2458ae[_0x23ae99(0x119)]===_0xc70f4?_0x2458ae[_0x23ae99(0x138)]=_0x2458ae[_0x23ae99(0x138)]===_0x1187dc(0x2e8)?_0x23ae99(0x14b):_0x1187dc(0x2e8):(_0x2458ae[_0x23ae99(0x119)]=_0xc70f4,_0x2458ae[_0x23ae99(0x138)]=_0x1187dc(0x2e8)),a0_0xa42681[_0x23ae99(0x1f3)](_0x2458ae);}export function calculateRT(_0x3343ef){const _0x2ba4f9=a0_0x4aad,_0x474e38=parseCurrency(document[_0x2ba4f9(0x1ab)](_0x2ba4f9(0x1c0))[_0x2ba4f9(0x216)]),_0x328f1e=parseFloat(document[_0x2ba4f9(0x1ab)](_0x2ba4f9(0xe1))[_0x2ba4f9(0x221)]);document[_0x2ba4f9(0x1ab)](_0x2ba4f9(0x130))[_0x2ba4f9(0x216)]=formatCurrency(_0x474e38*_0x328f1e);}function a0_0x4c96(){const _0x535c81=['Histórico\x20de\x20Vendas\x20para\x20','dataUrl','Erro\x20ao\x20verificar\x20duplicidade\x20de\x20importação:\x20','push','remove','.view-comissao-details-btn','id_venda','6IwXWjg','schemaHasRtAcumulado','1393uxIxej','reduce','Gerou\x20','idPedido','PGRST116','valorVendasTotal','Arquiteto\x20com\x20ID\x20','importacao_sysled_','sales-history-modal-title','renderSysledTable','Erro\x20ao\x20salvar\x20na\x20tabela\x20sysled_imports:','body','pontuacoes','<p\x20class=\x22text-center\x20text-gray-400\x20py-8\x22>Buscando\x20dados...\x20<span\x20class=\x22material-symbols-outlined\x20animate-spin\x20align-middle\x22>progress_activity</span></p>','\x20já\x20importada.','Erro\x20ao\x20atualizar\x20dados\x20do\x20arquiteto:\x20','delete','isSysledImport','type','data_venda','matches','Solicitação\x20de\x20comissão\x20manual\x20enviada\x20para\x20aprovação!','pix','sysledFilteredData','Enviou\x20comissão\x20manual\x20para\x20aprovação\x20de\x20','\x20pagamentos\x20em\x20lote.','Arquiteto\x20sem\x20saldo\x20de\x20RT\x20acumulado\x20para\x20resgate.','date','arquiteto-select','id_prevenda','.delete-pagamentos-btn','desc','limit','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</tr>','all','.delete-btn','.pagamento-status','231DQRObo','classList','add','</tbody>\x0a\x20\x20\x20\x20\x20\x20</table>\x0a\x20\x20\x20\x20</div>','localeCompare','rt-file-name','252004lxqgfR','Gerar\x20pagamento\x20de\x20','disabled','Comprovante\x20gerado,\x20mas\x20erro\x20ao\x20atualizar\x20saldo:\x20','Dados\x20do\x20arquiteto\x20atualizados,\x20mas\x20falha\x20ao\x20marcar\x20comissão\x20como\x20aprovada:\x20','manual-valor-venda','Comprovante\x20anexado','createElement','Erro\x20ao\x20gerar\x20comprovante:\x20','Venda\x20','novo-arquiteto-nome','currentUserEmail','readAsArrayBuffer','id_pedido','APAGOU\x20TODOS\x20OS\x20DADOS\x20DO\x20SISTEMA.','active','\x20gerado\x20com\x20sucesso\x20para\x20','rt-file-input','Resgate\x20gerado,\x20mas\x20erro\x20ao\x20atualizar\x20saldo\x20do\x20arquiteto:\x20','\x20como\x20','hasOwnProperty','comissaoId','Criou\x20novo\x20arquiteto\x20(ID:\x20','Pagamentos','Anexou\x20comprovante\x20para\x20o\x20','comprovante','Sheets','valor_venda','3EBgDlx','handleGerarResgateFicha:\x20Atualizando\x20arquiteto\x20com\x20payload:','https://integration.sysled.com.br/n8n/api/?v_crm_oportunidades_propostas_up180dd=null','pt-BR','Os\x20dados\x20da\x20Sysled\x20parecem\x20estar\x20incompletos.\x20Colunas\x20essenciais\x20como\x20\x27idParceiro\x27,\x20\x27valorNota\x27\x20ou\x20\x27idPedido\x27\x20não\x20foram\x20encontradas.\x20Importação\x20cancelada.','.gerar-relatorio-btn','\x20arquitetos\x20via\x20planilha.','constructor','message','ID\x20já\x20existe.','parceiro','\x20e\x20atualizou\x20','appendChild','handleGerarResgateFicha:\x20Erro\x20ao\x20buscar\x20consultor:','Comprovante\x20gerado\x20com\x20sucesso\x20para\x20','Não\x20cadastrada','Não\x20há\x20dados\x20para\x20exportar.','clienteFantasia','result','TEM\x20CERTEZA?\x20Esta\x20ação\x20apagará\x20TODOS\x20os\x20dados\x20de\x20forma\x20irreversível.','click','novo-arquiteto-tipo-pix','querySelector','Erro\x20ao\x20cadastrar\x20arquiteto:\x20','Erro\x20ao\x20registrar\x20importação:','Iniciando\x20handleGerarResgateFicha...','Todos\x20os\x20dados\x20foram\x20apagados\x20com\x20sucesso.','book_append_sheet','name','\x20novos\x20arquitetos\x20importados.\x0a','Cadastrou\x20novo\x20arquiteto:\x20','rt_valor','shift','Nenhum\x20arquiteto\x20atingiu\x20o\x20valor\x20mínimo\x20para\x20pagamento.','trim','SheetNames','statusText','Valor\x20inválido.','array','openComissaoManualDetailsModal','Erro\x20ao\x20salvar:\x20','comissoes_manuais','Limpou\x20todo\x20o\x20log\x20de\x20eventos.','comissoesManuais','preventDefault','\x20não\x20encontrado.','104710KQkwiW','Erro:\x20Comissão\x20não\x20encontrada.','edit-arquiteto-original-id','rt-valor-calculado','json_to_sheet','Erro:\x20','Esta\x20comissão\x20já\x20foi\x20aprovada.','edit-arquiteto-vendas','checked','</p></div></div></body></html>','nome','\x20venda(s)\x20da\x20Sysled.\x20Deseja\x20continuar?','6666120LHfpDY','closeSaleDetailsModal','idParceiro','Gerou\x20pagamento\x20individual\x20de\x20','sort','select','className','cadastro_arquitetos.xlsx','.file-status-text','sales-history-modal','2161004fwOhUN','.sortable-header','Não','join','document',')\x20para\x20','14haBVlc','maybeSingle','<p\x20class=\x22text-center\x20text-red-400\x20py-8\x22>Erro\x20ao\x20carregar\x20dados\x20da\x20API.</p>','innerHTML','edit-rt-input','Arquiteto\x20sem\x20saldo\x20de\x20RT\x20acumulado\x20para\x20pagamento.','Erro\x20ao\x20buscar\x20histórico\x20de\x20vendas:','id_parceiro','showNovoArquitetoModal','arquiteto-nome','tempRTData','Apagou\x20o\x20lote\x20de\x20pagamentos\x20gerado\x20em\x20','order','renderSalesHistoryModal','Ocorreram\x20erros:\x20','tipo_chave_pix','consultor','\x20(ID:\x20','closeGerarPagamentosModal','closeAddValueModal','</h2>\x0a\x20\x20\x20\x20\x20\x20<table\x20class=\x22w-full\x20text-sm\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<thead>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr\x20class=\x22border-b-2\x20border-gray-300\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th\x20class=\x22p-2\x20text-left\x22>ID</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th\x20class=\x22p-2\x20text-left\x22>Parceiro</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th\x20class=\x22p-2\x20text-left\x22>Chave\x20Pix</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th\x20class=\x22p-2\x20text-left\x22>Consultor</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th\x20class=\x22p-2\x20text-right\x22>Valor\x20RT</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</thead>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<tbody>','search','single','sysled_imports','renderAll','files','(((.+)+)+)+$','eligibleForPayment','renderArquitetosTable','file-name-arquitetos','Nenhum\x20arquiteto\x20para\x20importar\x20ou\x20atualizar.','e4b6f9082f1b8a1f37ad5b56e637f3ec719ec8f0b6acdd093972f9c5bb29b9ed','write','insert','.view-sale-details-btn','idEmpresa','findIndex','openAddValueModal','edit-rt-pagamento-id','E-mail\x20e\x20Chave\x20PIX\x20são\x20obrigatórios.','schemaHasRtTotalPago','download','sortDirection','neq','handleGerarResgateFicha:\x20Usuário\x20confirmou\x20o\x20resgate.','<div\x20class=\x22mt-12\x20text-right\x20border-t-2\x20pt-6\x22><h3\x20class=\x22text-xl\x20font-bold\x20text-gray-700\x22>Soma\x20Total\x20(RT)\x20a\x20Pagar</h3><p\x20class=\x22text-4xl\x20font-bold\x20mt-2\x20text-green-600\x22>','value','Sem\x20dados\x20para\x20exportar.','Arquitetos','read','find','id_pedido,\x20valor_nota,\x20data_finalizacao_prevenda','reset','closest','novo-arquiteto-email','some','Funcionalidade\x20desabilitada.\x20Verifique\x20o\x20console.','Erro\x20ao\x20verificar\x20duplicidade\x20de\x20comissão\x20manual:\x20','.pagamento-status,\x20.comprovante-input','edit-arquiteto-email','\x20para\x20','length','Importou\x20o\x20arquivo:\x20','.xlsx','target','sysled-filter-data-inicio','sysledData','pago','Nenhuma\x20venda\x20nova\x20para\x20importar.\x20Todas\x20as\x20vendas\x20filtradas\x20já\x20foram\x20processadas\x20anteriormente.','open','Importou\x20','Aprovar\x20a\x20inclusão\x20de\x20','Erro:\x20Arquiteto\x20não\x20encontrado.','toLocaleDateString','code','json','sales-history-table-container','N/A','Sim','arquivos_importados','resgate','58299xESucW','asc','novo-arquiteto-pix','7153578KXcSZz','Venda(s)\x20já\x20importada(s)\x20e\x20ignorada(s):\x20','parentElement','\x20não\x20foi\x20encontrado.','loadData','434860eZIqxG','Gerou\x20resgate\x20individual\x20de\x20','edit-arquiteto-tipo-pix','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22p-2\x20text-right\x22>','openGerarPagamentosModal','<p\x20class=\x22text-center\x20text-gray-400\x20py-8\x22>Consultando...\x20<span\x20class=\x22material-symbols-outlined\x20animate-spin\x20align-middle\x22>progress_activity</span></p>','dataFinalizacaoPrevenda','handleGerarResgateFicha:\x20Arquiteto\x20não\x20encontrado\x20com\x20o\x20ID:','data_geracao','valorNota','closeEditModal','109482dBhQLk','Ajustou\x20','pagamentos','Pagamentos_','Ocorreu\x20um\x20erro\x20durante\x20o\x20processo:\x0a','file-status-text\x20text-xs\x20text-green-400\x20font-semibold','rt-valor-vendas','.id-link','Erro\x20ao\x20gerar\x20resgate:\x20','Aprovou\x20comissão\x20manual\x20de\x20','slice','status','pedidoId','forEach','handleGerarResgateFicha:\x20Consultor\x20encontrado:','Erro\x20ao\x20verificar\x20vendas\x20existentes:\x20','Log\x20de\x20eventos\x20limpo\x20com\x20sucesso.','pontos','openSaleDetailsModal','salesCount','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22p-2\x22>','\x20para\x20o\x20parceiro\x20','rtPercentual','aprovada','rt-mapping-form','#aprovar-inclusao-manual-btn','telefone','sheet_to_json','sortColumn','Marcou\x20','manual-consultor','Tem\x20certeza\x20que\x20deseja\x20apagar\x20os\x20pagamentos\x20de\x20','data_finalizacao_prevenda','dataset','filter','openEditModal','closeEditRtModal','writeFile','sysled-table-container','Não\x20encontrado','rt_total_pago','novo-arquiteto-id','156rnmVuR','sysled-filter-excluir-parceiro','Sem\x20dados\x20para\x20gerar\x20relatório.','map','error','apply','.download-arquivo-btn','getElementById','Não\x20há\x20dados\x20filtrados\x20para\x20copiar.\x20Por\x20favor,\x20filtre\x20os\x20dados\x20primeiro\x20ou\x20atualize\x20a\x20consulta.','Tem\x20certeza\x20que\x20deseja\x20apagar\x20TODOS\x20os\x20logs\x20de\x20eventos?\x20Esta\x20ação\x20é\x20irreversível.','Erro\x20ao\x20limpar\x20o\x20log\x20de\x20eventos:\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<tr\x20class=\x22border-b\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22p-2\x22>','\x20pontos\x20para\x20','chave_pix',')\x20de\x20','manual-id-venda','<div\x20class=\x22report-section\x22>\x0a\x20\x20\x20\x20\x20\x20<h2\x20class=\x22text-2xl\x20font-bold\x20mb-6\x22>Relatório\x20de\x20Pagamento\x20-\x20','rt_acumulado','floor','<html><head><title>Relatório\x20-\x20','777636iLOcyK','O\x20\x27ID\x20Prevenda\x27\x20é\x20obrigatório\x20para\x20importações\x20Sysled\x20para\x20evitar\x20duplicatas.','\x20comprovantes\x20gerados!','Erro\x20ao\x20registrar\x20ação\x20no\x20log:','Nenhuma\x20venda\x20nova\x20para\x20importar.','novo-arquiteto-telefone','handleGerarResgateFicha:\x20Enviando\x20payload\x20para\x20Supabase:','.comprovante-input','close','tempArquitetoData','754326ptykBr','Não\x20é\x20possível\x20aprovar.\x20A\x20venda\x20com\x20ID\x20','pagamento','Gerar\x20resgate\x20de\x20','arquitetos','edit-arquiteto-pix','\x20já\x20foi\x20importada\x20anteriormente\x20e\x20não\x20pode\x20ser\x20incluída\x20manualmente.','values','43944mBJFRR','utils','manual-id-parceiro','importedFiles','Dados\x20de\x20vendas\x20processados\x20com\x20sucesso!','toString','arquiteto-telefone','handleGerarResgateFicha:\x20Resgate\x20inserido\x20com\x20sucesso.','\x20arquitetos\x20atualizados.\x0a','toISOString','Novo\x20Parceiro','Aviso:\x20Erro\x20ao\x20registrar\x20na\x20tabela\x20de\x20controle\x20de\x20duplicados\x20(sysled_imports).','replace','log','1968712EvatwH','from','update'];a0_0x4c96=function(){return _0x535c81;};return a0_0x4c96();}export function handleArquivosImportadosClick(_0xb22e53,_0x1627fb){const _0x46079c=a0_0x50b7,_0x2e4175=a0_0x4aad,_0x7fb24b=_0x1627fb[_0x2e4175(0x123)][_0x46079c(0x2cb)](_0x46079c(0x1cb));_0x7fb24b&&(_0x1627fb[_0x2e4175(0xfb)](),downloadImportedFile(_0xb22e53,_0x7fb24b[_0x2e4175(0x1b4)][_0x46079c(0x220)]));}export function downloadImportedFile(_0x4d9620,_0x4373dd){const _0x7e3b9b=a0_0x50b7,_0x438c61=a0_0x4aad,_0x3890b8=_0x4d9620[_0x7e3b9b(0x1ee)][_0x4373dd];if(_0x3890b8){const _0x979bf3=document[_0x438c61(0x1e9)]('a');_0x979bf3[_0x438c61(0x20b)]=_0x3890b8[_0x438c61(0x155)],_0x979bf3[_0x438c61(0x236)]=_0x3890b8[_0x438c61(0x232)],document[_0x438c61(0x192)][_0x7e3b9b(0x258)](_0x979bf3),_0x979bf3[_0x438c61(0x16a)](),document[_0x7e3b9b(0x210)]['removeChild'](_0x979bf3);}}export async function handleAddComissaoManual(_0x2f8b5e,_0x3fdb44){const _0x5984fc=a0_0x50b7,_0x53c5eb=a0_0x4aad;_0x3fdb44[_0x53c5eb(0xfb)]();const _0x4af6c5=_0x3fdb44['target'],_0x32ad39=document[_0x53c5eb(0x1ab)](_0x5984fc(0x1ed))[_0x53c5eb(0x221)][_0x53c5eb(0x103)](),_0x5f3cf5=document[_0x53c5eb(0x1ab)](_0x5984fc(0x1d4))[_0x53c5eb(0x221)][_0x53c5eb(0x103)](),_0x6f3956=parseFloat(document[_0x53c5eb(0x1ab)](_0x53c5eb(0xec))[_0x53c5eb(0x221)]);if(!_0x32ad39||isNaN(_0x6f3956)||_0x6f3956<=0x0){alert(_0x53c5eb(0x16c));return;}if(_0x5f3cf5){const {data:_0x2b7d32,error:_0x4c0087}=await supabase[_0x53c5eb(0x165)](_0x53c5eb(0x1b1))[_0x53c5eb(0x1f1)](_0x53c5eb(0x14a))['eq'](_0x53c5eb(0x14a),_0x5f3cf5)[_0x5984fc(0x297)]();if(_0x4c0087){alert(_0x53c5eb(0xe7)+_0x4c0087[_0x53c5eb(0x1aa)]);return;}if(_0x2b7d32){alert('Venda\x20com\x20ID\x20'+_0x5f3cf5+_0x5984fc(0x1e9));return;}const {data:_0x2b174f,error:_0x486b8d}=await supabase[_0x53c5eb(0x165)](_0x5984fc(0x275))[_0x5984fc(0x28b)]('id')['eq']('id_venda',_0x5f3cf5)[_0x53c5eb(0x1c4)]();if(_0x486b8d){alert(_0x53c5eb(0x215)+_0x486b8d[_0x53c5eb(0x1aa)]);return;}if(_0x2b174f){alert(_0x53c5eb(0x224)+_0x5f3cf5+'.');return;}}const _0x382560=_0x2f8b5e[_0x5984fc(0x1e7)]['find'](_0xa50dc3=>_0xa50dc3['id']===_0x32ad39);if(!_0x382560){alert(_0x53c5eb(0x145)+_0x32ad39+_0x53c5eb(0xfd));return;}const _0x5ba014={'id_parceiro':_0x32ad39,'id_venda':_0x5f3cf5,'valor_venda':_0x6f3956,'data_venda':document[_0x53c5eb(0x1ab)](_0x53c5eb(0xdb))[_0x53c5eb(0x221)],'consultor':document[_0x53c5eb(0x1ab)](_0x53c5eb(0x173))[_0x53c5eb(0x221)],'justificativa':document[_0x53c5eb(0x1ab)](_0x53c5eb(0x1dc))[_0x53c5eb(0x221)],'status':_0x53c5eb(0x1e0)},{error:_0x4d329c}=await supabase['from'](_0x5984fc(0x275))[_0x53c5eb(0x21d)](_0x5ba014);if(_0x4d329c){alert('Erro\x20ao\x20salvar\x20solicitação:\x20'+_0x4d329c[_0x53c5eb(0x1aa)]);return;}alert(_0x53c5eb(0xef)),await logAction(_0x2f8b5e,_0x53c5eb(0xe3)+formatCurrency(_0x6f3956)+_0x5984fc(0x2d2)+_0x382560[_0x53c5eb(0x159)]),_0x4af6c5[_0x53c5eb(0x13e)](),await _0x2f8b5e[_0x53c5eb(0x18c)](),a0_0xa42681[_0x53c5eb(0x218)](_0x2f8b5e);}export async function handleAprovarInclusaoManual(_0x53f28c,_0x3e11c6){const _0xd2f017=a0_0x50b7,_0x58b2a4=a0_0x4aad,_0x5deef3=_0x3e11c6[_0x58b2a4(0x123)][_0x58b2a4(0xf0)](_0xd2f017(0x1b4));if(!_0x5deef3)return;const _0x331b79=parseInt(_0x5deef3[_0x58b2a4(0x1b4)][_0x58b2a4(0x1da)],0xa),_0x277d29=_0x53f28c[_0x58b2a4(0x184)][_0x58b2a4(0xff)](_0x54d7ab=>_0x54d7ab['id']===_0x331b79);if(!_0x277d29){alert(_0xd2f017(0x27b));return;}if(_0x277d29[_0xd2f017(0x1a6)]===_0x58b2a4(0x102)){alert(_0xd2f017(0x280));return;}if(_0x277d29[_0xd2f017(0x202)]){const {data:_0x51ebf5,error:_0x28bed4}=await supabase[_0xd2f017(0x1fa)](_0x58b2a4(0x1b1))[_0x58b2a4(0x1f1)](_0x58b2a4(0x14a))['eq'](_0x58b2a4(0x14a),_0x277d29[_0x58b2a4(0x164)])[_0xd2f017(0x297)]();if(_0x28bed4){alert('Erro\x20ao\x20verificar\x20a\x20existência\x20da\x20venda:\x20'+_0x28bed4[_0x58b2a4(0x1aa)]);return;}if(_0x51ebf5){alert(_0xd2f017(0x1e4)+_0x277d29[_0x58b2a4(0x164)]+_0x58b2a4(0x146));return;}}if(!confirm(_0xd2f017(0x2dd)+formatCurrency(_0x277d29[_0x58b2a4(0x186)])+_0x58b2a4(0x18b)+_0x277d29['id_parceiro']+'?'))return;const _0x3b7825=_0x53f28c[_0x58b2a4(0x16f)][_0x58b2a4(0xff)](_0x36f49b=>_0x36f49b['id']===_0x277d29[_0xd2f017(0x29d)]);if(!_0x3b7825){alert(_0x58b2a4(0x145)+_0x277d29[_0x58b2a4(0x235)]+_0x58b2a4(0x1d0));return;}const _0x30a83a=_0x277d29[_0x58b2a4(0x186)],_0x533157={'valorVendasTotal':(_0x3b7825['valorVendasTotal']||0x0)+_0x30a83a,'pontos':(_0x53f28c[_0x58b2a4(0x177)][_0x277d29[_0x58b2a4(0x235)]]||0x0)+Math[_0x58b2a4(0x100)](_0x30a83a/0x3e8),'salesCount':(_0x3b7825[_0x58b2a4(0xe9)]||0x0)+0x1};_0x53f28c[_0x58b2a4(0x1a4)]&&(_0x533157[_0x58b2a4(0x14c)]=parseFloat(_0x3b7825[_0x58b2a4(0x14c)]||0x0)+_0x30a83a*(_0x3b7825[_0x58b2a4(0x10f)]||0.05));const {error:_0x2870c5}=await supabase[_0x58b2a4(0x165)](_0x58b2a4(0x16f))[_0x58b2a4(0x125)](_0x533157)['eq']('id',_0x277d29[_0x58b2a4(0x235)]);if(_0x2870c5){alert(_0x58b2a4(0x185)+_0x2870c5[_0x58b2a4(0x1aa)]);return;}const {error:_0x2b05b6}=await supabase[_0x58b2a4(0x165)](_0x58b2a4(0x209))['update']({'status':_0xd2f017(0x1b2)})['eq']('id',_0x331b79);_0x2b05b6&&alert(_0xd2f017(0x234)+_0x2b05b6[_0x58b2a4(0x1aa)]);if(_0x277d29[_0xd2f017(0x202)]){const {error:_0x3421cd}=await supabase['from']('sysled_imports')[_0xd2f017(0x2b7)]({'id_parceiro':_0x277d29[_0x58b2a4(0x235)],'valor_nota':_0x277d29['valor_venda'],'data_finalizacao_prevenda':_0x277d29['data_venda'],'id_pedido':_0x277d29[_0x58b2a4(0x164)],'consultor':_0x277d29[_0x58b2a4(0x156)]});if(_0x3421cd)alert(_0x58b2a4(0x198));}alert(_0x58b2a4(0x228)),await logAction(_0x53f28c,_0x58b2a4(0x17a)+formatCurrency(_0x30a83a)+_0x58b2a4(0x211)+_0x3b7825[_0x58b2a4(0x159)]+_0x58b2a4(0x200)+_0x3b7825['id']+')'),await _0x53f28c[_0x58b2a4(0x18c)](),a0_0xa42681[_0xd2f017(0x2ae)](_0x53f28c),a0_0xa42681['closeComissaoManualDetailsModal']();}export function handleHistoricoManualClick(_0xa10a63,_0x561c2e){const _0x48bb5c=a0_0x50b7,_0x154bc7=a0_0x4aad,_0x380894=_0x561c2e[_0x154bc7(0x123)][_0x48bb5c(0x2cb)](_0x48bb5c(0x201));if(_0x380894){_0x561c2e[_0x48bb5c(0x278)]();const _0x424fbf=parseInt(_0x380894[_0x154bc7(0x1b4)]['comissaoId'],0xa);a0_0xa42681[_0x154bc7(0x1c2)](_0xa10a63,_0x424fbf);}}export async function clearEventsLog(_0x1fc641){const _0x5b4670=a0_0x50b7,_0x13476f=a0_0x4aad;if(confirm(_0x13476f(0x20c))){const {error:_0x5d1ad8}=await supabase[_0x5b4670(0x1fa)](_0x13476f(0x1eb))[_0x13476f(0x183)]()[_0x13476f(0x1b8)]('id',0x0);_0x5d1ad8?alert(_0x5b4670(0x1cf)+_0x5d1ad8['message']):(alert(_0x5b4670(0x1ab)),await logAction(_0x1fc641,_0x13476f(0xe5)),await _0x1fc641[_0x13476f(0x18c)](),a0_0xa42681[_0x13476f(0x218)](_0x1fc641));}}function a0_0x4aad(_0x7a1c29,_0x1cd1c3){const _0x14e2f7=a0_0x3e83();return a0_0x4aad=function(_0x7c24be,_0xdb791d){_0x7c24be=_0x7c24be-0xdb;let _0x1a6880=_0x14e2f7[_0x7c24be];return _0x1a6880;},a0_0x4aad(_0x7a1c29,_0x1cd1c3);}export async function verificarArquitetosNaoCadastrados(_0x5c445e,_0x5dd9c5){const _0x212f08=a0_0x50b7,_0x5a535a=a0_0x4aad,_0x3f1bd6=[...new Set(_0x5dd9c5[_0x5a535a(0x128)](_0x48011b=>String(_0x48011b[_0x5a535a(0x235)])))],_0x294d9b=[];for(const _0x1c53ec of _0x3f1bd6){const _0x29d276=_0x5c445e[_0x5a535a(0x16f)][_0x5a535a(0xff)](_0xe70308=>_0xe70308['id']===_0x1c53ec);if(!_0x29d276){const _0x44d94a=_0x5dd9c5[_0x5a535a(0xff)](_0x1667f3=>String(_0x1667f3[_0x5a535a(0x235)])===_0x1c53ec);_0x294d9b['push']({'id':_0x1c53ec,'nome':_0x44d94a[_0x212f08(0x256)]||_0x5a535a(0x229)});}}return _0x294d9b;}export async function handleNovoArquitetoSubmit(_0x3b0106,_0x4495f6){const _0x4a8ca4=a0_0x50b7,_0x1f40a1=a0_0x4aad;_0x4495f6[_0x1f40a1(0xfb)]();const _0x190e8c=document[_0x4a8ca4(0x1cc)](_0x1f40a1(0x217))[_0x1f40a1(0x221)],_0x5248a8=document['getElementById'](_0x1f40a1(0x133))[_0x1f40a1(0x221)],_0x15fb92=document[_0x4a8ca4(0x1cc)](_0x1f40a1(0x1a2))[_0x1f40a1(0x221)],_0x371112=document['getElementById'](_0x1f40a1(0x1e3))[_0x4a8ca4(0x2c4)],_0x12c9a0=document[_0x1f40a1(0x1ab)](_0x1f40a1(0x171))[_0x1f40a1(0x221)],_0x23b425=document[_0x4a8ca4(0x1cc)](_0x1f40a1(0x151))[_0x4a8ca4(0x2c4)];if(!_0x15fb92||!_0x12c9a0){alert(_0x1f40a1(0x11c));return;}try{const _0x181c5f={'id':_0x190e8c,'nome':_0x5248a8,'email':_0x15fb92,'telefone':_0x23b425,'tipo_chave_pix':_0x371112,'pix':_0x12c9a0,'salesCount':0x0,'valorVendasTotal':0x0,'pontos':0x0,'rtPercentual':0.05,'rt_acumulado':0x0,'rt_total_pago':0x0},{data:_0x2ee4b1,error:_0x352d95}=await supabase[_0x1f40a1(0x165)](_0x1f40a1(0x16f))[_0x4a8ca4(0x2b7)](_0x181c5f)['select']()[_0x1f40a1(0x1ad)]();if(_0x352d95){alert(_0x1f40a1(0x1f4)+_0x352d95[_0x4a8ca4(0x254)]);return;}_0x3b0106[_0x1f40a1(0x16f)][_0x1f40a1(0x1e6)](_0x2ee4b1),_0x3b0106[_0x1f40a1(0x177)][_0x190e8c]=0x0,await logAction(_0x3b0106,_0x1f40a1(0x190)+_0x5248a8+_0x1f40a1(0x200)+_0x190e8c+')'),document['getElementById'](_0x1f40a1(0x1a6))[_0x1f40a1(0x114)][_0x1f40a1(0x1ba)](_0x1f40a1(0xf8)),_0x3b0106[_0x1f40a1(0x10c)]&&await continuarImportacao(_0x3b0106);}catch(_0x49ef00){alert(_0x1f40a1(0x1f4)+_0x49ef00[_0x1f40a1(0x1aa)]);}}export async function continuarImportacao(_0x2c9ae7){const _0x18e56e=a0_0x50b7,_0x268618=a0_0x4aad;if(!_0x2c9ae7[_0x268618(0x10c)])return;const _0x5cb22c=_0x2c9ae7[_0x268618(0x10c)];_0x2c9ae7[_0x268618(0x10c)]=null;const _0x204567=_0x5cb22c[_0x268618(0x128)](_0x2d2b6d=>_0x2d2b6d[_0x268618(0x1ea)])[_0x18e56e(0x1bd)](_0x2d204f=>_0x2d204f);if(_0x204567[_0x268618(0x167)]>0x0){const {data:_0x142890,error:_0x574228}=await supabase[_0x268618(0x165)](_0x268618(0x1b1))[_0x268618(0x1f1)](_0x18e56e(0x23d))['in'](_0x268618(0x14a),_0x204567);if(_0x574228){alert(_0x268618(0x176)+_0x574228[_0x18e56e(0x254)]),_0x2c9ae7[_0x268618(0x207)]=![];return;}const _0x42e0a0=new Set(_0x142890[_0x268618(0x128)](_0x2d5f15=>String(_0x2d5f15[_0x18e56e(0x23d)]))),_0x85120e=_0x5cb22c[_0x268618(0x13a)](_0x477e42=>_0x42e0a0[_0x268618(0x1fc)](String(_0x477e42[_0x268618(0x1ea)]))),_0x24cdc5=_0x5cb22c['filter'](_0x4bea6d=>!_0x42e0a0[_0x268618(0x1fc)](String(_0x4bea6d[_0x268618(0x1ea)])));_0x85120e[_0x268618(0x167)]>0x0&&alert(_0x18e56e(0x2eb)+_0x85120e[_0x18e56e(0x1c8)](_0x153164=>_0x153164[_0x268618(0x1ea)])[_0x268618(0x1de)](',\x20')),_0x24cdc5[_0x268618(0x167)]>0x0?await processRTData(_0x2c9ae7,_0x24cdc5):(alert(_0x268618(0x137)),_0x2c9ae7[_0x18e56e(0x216)]=![]);}else await processRTData(_0x2c9ae7,_0x5cb22c);}function a0_0x3e83(){const _0x477292=a0_0x50b7,_0x5c3bd7=[_0x477292(0x21f),_0x477292(0x2c1),_0x477292(0x1a8),_0x477292(0x200),'pedidoId',_0x477292(0x282),'handleGerarResgateFicha:\x20Arquiteto\x20encontrado:',_0x477292(0x209),_0x477292(0x2d0),_0x477292(0x1a1),_0x477292(0x2f2),_0x477292(0x273),_0x477292(0x2d8),_0x477292(0x297),_0x477292(0x2de),_0x477292(0x2b9),'sysledFilteredData',_0x477292(0x22a),'arquiteto-id',_0x477292(0x291),'_blank',_0x477292(0x1df),'AVISO:\x20Os\x20dados\x20dos\x20arquitetos\x20foram\x20atualizados,\x20mas\x20ocorreu\x20um\x20erro\x20ao\x20salvar\x20o\x20histórico\x20de\x20importação\x20para\x20evitar\x20duplicatas.\x20Vendas\x20podem\x20ser\x20importadas\x20novamente\x20no\x20futuro.\x20Erro:\x20',_0x477292(0x1ef),'Aviso:\x20Não\x20foi\x20possível\x20encontrar\x20o\x20consultor.\x20O\x20pagamento\x20será\x20gerado\x20sem\x20essa\x20informação.',_0x477292(0x2ed),_0x477292(0x2db),_0x477292(0x19a),'handleGerarResgateFicha:\x20Erro\x20ao\x20atualizar\x20saldo\x20do\x20arquiteto:','.view-comprovante-btn','openArquitetoMappingModal','openComprovanteModal',_0x477292(0x24a),'(((.+)+)+)+$','176950xwQJTl',_0x477292(0x245),_0x477292(0x1ba),'manual-justificativa',_0x477292(0x239),_0x477292(0x293),'Editou\x20o\x20arquiteto:\x20','pendente','.add-value-btn',_0x477292(0x225),_0x477292(0x261),'arquiteto-pix',_0x477292(0x1e2),'push',_0x477292(0x1bb),'Dados\x20da\x20venda\x20não\x20encontrados.',_0x477292(0x237),_0x477292(0x222),'action_logs',_0x477292(0x281),'Erro\x20na\x20API:\x20',_0x477292(0x2dc),'Erro\x20ao\x20criar\x20arquiteto\x20','resgates',_0x477292(0x28b),_0x477292(0x219),_0x477292(0x2b2),_0x477292(0x263),_0x477292(0x26b),_0x477292(0x1e6),'querySelectorAll',_0x477292(0x296),_0x477292(0x241),_0x477292(0x1c9),'search','has','</title><script\x20src=\x22https://cdn.tailwindcss.com\x22></script><style>@media\x20print{.no-print{display:\x20none;}}\x20body\x20{\x20font-family:\x20sans-serif;\x20}</style></head><body\x20class=\x22p-8\x20bg-gray-100\x22><div\x20class=\x22no-print\x20text-center\x20mb-8\x22><button\x20onclick=\x22window.print()\x22\x20class=\x22bg-blue-600\x20text-white\x20py-2\x20px-6\x20rounded-lg\x20shadow-md\x20hover:bg-blue-700\x20transition\x22>Imprimir</button></div><div\x20class=\x22max-w-5xl\x20mx-auto\x20bg-white\x20p-12\x20rounded-xl\x20shadow-2xl\x22>',_0x477292(0x2cd),_0x477292(0x271),_0x477292(0x2a7),_0x477292(0x257),_0x477292(0x2e5),'handleGerarResgateFicha:\x20Saldo\x20do\x20arquiteto\x20atualizado\x20com\x20sucesso.','336185PlIXdD','pontos-valor',_0x477292(0x1f1),'isSysledImport',_0x477292(0x2c2),_0x477292(0x275),_0x477292(0x194),'href',_0x477292(0x1ce),_0x477292(0x19d),_0x477292(0x19b),_0x477292(0x206),_0x477292(0x2a2),_0x477292(0x2d2),'idPedido','Não\x20foi\x20possível\x20buscar\x20dados\x20atualizados.',_0x477292(0x1af),_0x477292(0x2cf),'textContent',_0x477292(0x1c4),'renderAll',_0x477292(0x29b),_0x477292(0x1d2),'openRtMappingModal',_0x477292(0x246),_0x477292(0x2b7),_0x477292(0x24c),_0x477292(0x264),_0x477292(0x1c2),'value',_0x477292(0x207),_0x477292(0x1ec),'Já\x20existe\x20uma\x20inclusão\x20manual\x20para\x20a\x20venda\x20com\x20ID\x20',_0x477292(0x2e7),_0x477292(0x20e),'innerHTML','Comissão\x20aprovada\x20e\x20valores\x20contabilizados\x20com\x20sucesso!',_0x477292(0x1f5),'NÃO\x20PAGO',_0x477292(0x1d3),_0x477292(0x27c),_0x477292(0x223),_0x477292(0x2c5),_0x477292(0x1cd),_0x477292(0x1b8),'Alterou\x20valor\x20do\x20','name',_0x477292(0x2e6),_0x477292(0x2a3),_0x477292(0x29d),_0x477292(0x2bf),'manual-data-venda',_0x477292(0x25e),_0x477292(0x22c),_0x477292(0x294),_0x477292(0x2f1),_0x477292(0x1dd),'rt-percentual',_0x477292(0x1be),_0x477292(0x21d),_0x477292(0x256),_0x477292(0x276),'.edit-btn',_0x477292(0x1fe),_0x477292(0x221),_0x477292(0x1ae),_0x477292(0x295),_0x477292(0x269),_0x477292(0x235),_0x477292(0x1d1),_0x477292(0x286),_0x477292(0x21a),_0x477292(0x2cb),_0x477292(0x2e3),_0x477292(0x2d5),'Adicionou\x20venda\x20manual\x20de\x20',_0x477292(0x233),_0x477292(0x199),'Venda(s)\x20já\x20importada(s)\x20e\x20ignorada(s):\x20',_0x477292(0x2ec),'active','?\x20O\x20saldo\x20será\x20zerado.',_0x477292(0x2c9),_0x477292(0x278),_0x477292(0x238),_0x477292(0x279),_0x477292(0x2d9),_0x477292(0x2c8),_0x477292(0x1d7),_0x477292(0x23e),_0x477292(0x1b2),_0x477292(0x26e),_0x477292(0x1d8),_0x477292(0x2aa),'arquiteto-mapping-form',_0x477292(0x26f),'pix',_0x477292(0x2ba),_0x477292(0x1ca),'add-value-arquiteto-id','pendingImportData','Erro\x20ao\x20apagar:\x20',_0x477292(0x2bc),_0x477292(0x1b1),'edit-arquiteto-telefone',_0x477292(0x1f7),_0x477292(0x28f),_0x477292(0x1f8),_0x477292(0x22b),_0x477292(0x242),_0x477292(0x248),_0x477292(0x1b3),_0x477292(0x20a),_0x477292(0x1b7),_0x477292(0x2d4),'<p\x20class=\x22text-center\x20text-red-400\x20py-8\x22>Erro\x20ao\x20consultar\x20vendas.</p>',_0x477292(0x2bd),_0x477292(0x2df),_0x477292(0x253),_0x477292(0x229),_0x477292(0x26d),_0x477292(0x292),_0x477292(0x25c),_0x477292(0x2d6),_0x477292(0x2d7),_0x477292(0x1fb),_0x477292(0x28e),_0x477292(0x287),_0x477292(0x1c8),_0x477292(0x272),'id_parceiro,\x20consultor,\x20data_finalizacao_prevenda','Arquivo:\x20',_0x477292(0x195),_0x477292(0x2b3),'PAGO','sysled-filter-parceiro',_0x477292(0x27d),_0x477292(0x1b5),_0x477292(0x2be),_0x477292(0x23a),'book_new',_0x477292(0x28a),_0x477292(0x1a9),_0x477292(0x2da),_0x477292(0x2c0),_0x477292(0x24d),_0x477292(0x1bd),_0x477292(0x1f4),_0x477292(0x19e),'#pagamentos-container,\x20#resgates-container','reset',_0x477292(0x2a1),_0x477292(0x22e),_0x477292(0x227),_0x477292(0x244),_0x477292(0x265),_0x477292(0x2f0),_0x477292(0x20b),'\x20já\x20foi\x20importada\x20anteriormente.','Apagou\x20o\x20arquiteto:\x20',_0x477292(0x249),_0x477292(0x1c5),_0x477292(0x23d),_0x477292(0x224),'rt_acumulado',_0x477292(0x285),_0x477292(0x1bf),_0x477292(0x2b5),_0x477292(0x2af),_0x477292(0x1de),_0x477292(0x1ee),_0x477292(0x1f2),'onload',_0x477292(0x1fd),_0x477292(0x2a6),_0x477292(0x1ea),_0x477292(0x203),_0x477292(0x284),_0x477292(0x2b1),'pontos',_0x477292(0x27e),_0x477292(0x1e5),_0x477292(0x2a5),_0x477292(0x29a),'button',_0x477292(0x236),'edit-arquiteto-nome',_0x477292(0x25b),_0x477292(0x202),_0x477292(0x1fa),_0x477292(0x19f),_0x477292(0x2d3),_0x477292(0x1fc),_0x477292(0x2d1),_0x477292(0x260),'arquiteto-email','Preencha\x20o\x20ID\x20do\x20Parceiro\x20e\x20um\x20Valor\x20de\x20Venda\x20válido.',_0x477292(0x20d),_0x477292(0x2c6),_0x477292(0x1e7),_0x477292(0x23c),_0x477292(0x2e9),_0x477292(0x255),_0x477292(0x1b9),_0x477292(0x1a5),_0x477292(0x259),_0x477292(0x1aa),'pontuacoes',_0x477292(0x2ce),_0x477292(0x2a0),_0x477292(0x1a4),'Atualizou\x20os\x20dados\x20da\x20consulta\x20Sysled.','Exportou\x20o\x20relatório\x20de\x20pagamentos\x20de\x20',_0x477292(0x2a8),_0x477292(0x232),_0x477292(0x28d),'openEditRtModal',_0x477292(0x27f),_0x477292(0x1ad),_0x477292(0x215),_0x477292(0x277),_0x477292(0x214),_0x477292(0x24b),_0x477292(0x2ea),_0x477292(0x2c7),_0x477292(0x1c3),_0x477292(0x196),_0x477292(0x1b0),_0x477292(0x2ee),_0x477292(0x283),'flat',_0x477292(0x213),_0x477292(0x26a),_0x477292(0x24e),_0x477292(0x210),_0x477292(0x1da),'Resgate\x20de\x20','email',_0x477292(0x1e0),_0x477292(0x1b6),_0x477292(0x1f6),_0x477292(0x247),_0x477292(0x20f),_0x477292(0x1a2),_0x477292(0x1f0),_0x477292(0x29e),'Erro\x20ao\x20buscar\x20dados\x20do\x20consultor:\x20','Adicionou\x20o\x20arquiteto:\x20',_0x477292(0x21e),_0x477292(0x226),_0x477292(0x2cc),'keys','schemaHasRtAcumulado','resgates-container','novo-arquiteto-modal',_0x477292(0x266),_0x477292(0x1a0),_0x477292(0x289),_0x477292(0x254),_0x477292(0x1cc),'Erro\x20ao\x20gerar\x20comprovantes:\x20',_0x477292(0x2ac),_0x477292(0x2b6),'handleGerarResgateFicha:\x20Valor\x20do\x20resgate:',')\x20via\x20importação.',_0x477292(0x2ad),_0x477292(0x1c0),_0x477292(0x1f9),_0x477292(0x1bc),'idParceiro',_0x477292(0x267)];return a0_0x3e83=function(){return _0x5c3bd7;},a0_0x3e83();}