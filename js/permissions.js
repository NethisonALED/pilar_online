const a0_0x33e1e0=a0_0x24a5;(function(_0xdda0f5,_0x1a7de8){const _0x1802c8=a0_0x24a5,_0x27dc26=_0xdda0f5();while(!![]){try{const _0x3bb833=-parseInt(_0x1802c8(0x166))/0x1+-parseInt(_0x1802c8(0x170))/0x2*(parseInt(_0x1802c8(0x15b))/0x3)+-parseInt(_0x1802c8(0x17b))/0x4*(-parseInt(_0x1802c8(0x15d))/0x5)+-parseInt(_0x1802c8(0x156))/0x6*(-parseInt(_0x1802c8(0x19d))/0x7)+parseInt(_0x1802c8(0x165))/0x8+parseInt(_0x1802c8(0x196))/0x9+-parseInt(_0x1802c8(0x177))/0xa;if(_0x3bb833===_0x1a7de8)break;else _0x27dc26['push'](_0x27dc26['shift']());}catch(_0x5d5897){_0x27dc26['push'](_0x27dc26['shift']());}}}(a0_0x5104,0x323b3));const a0_0x20b98c=a0_0x5bc5;function a0_0x24a5(_0x176ae4,_0x17053b){const _0x55e8e1=a0_0x5104();return a0_0x24a5=function(_0x4e4947,_0x2db824){_0x4e4947=_0x4e4947-0x14a;let _0x510446=_0x55e8e1[_0x4e4947];return _0x510446;},a0_0x24a5(_0x176ae4,_0x17053b);}(function(_0x3114a7,_0x38bb4e){const _0x764f12=a0_0x24a5,_0x43a452=a0_0x5bc5,_0x2f1f2d=_0x3114a7();while(!![]){try{const _0xbff575=-parseInt(_0x43a452(0x1e9))/0x1*(parseInt(_0x43a452(0x1f5))/0x2)+parseInt(_0x43a452(0x1e2))/0x3+parseInt(_0x43a452(0x202))/0x4+parseInt(_0x43a452(0x1fc))/0x5*(parseInt(_0x43a452(0x206))/0x6)+parseInt(_0x43a452(0x1f4))/0x7*(-parseInt(_0x43a452(0x213))/0x8)+parseInt(_0x43a452(0x210))/0x9+parseInt(_0x43a452(0x21c))/0xa*(-parseInt(_0x43a452(0x218))/0xb);if(_0xbff575===_0x38bb4e)break;else _0x2f1f2d[_0x764f12(0x14c)](_0x2f1f2d['shift']());}catch(_0xedf9cf){_0x2f1f2d['push'](_0x2f1f2d[_0x764f12(0x152)]());}}}(a0_0x3926,0xd0c49));const a0_0x34d7db=(function(){const _0x3ad2bc=(function(){let _0x3cad06=!![];return function(_0x345ed7,_0x2491b0){const _0x43b9d1=_0x3cad06?function(){const _0x4f9b47=a0_0x24a5;if(_0x2491b0){const _0xa54811=_0x2491b0[_0x4f9b47(0x176)](_0x345ed7,arguments);return _0x2491b0=null,_0xa54811;}}:function(){};return _0x3cad06=![],_0x43b9d1;};}()),_0x9c78bf=_0x3ad2bc(this,function(){const _0xaa3a49=a0_0x24a5;return _0x9c78bf[_0xaa3a49(0x189)]()[_0xaa3a49(0x155)](_0xaa3a49(0x163))[_0xaa3a49(0x189)]()['constructor'](_0x9c78bf)[_0xaa3a49(0x155)](_0xaa3a49(0x163));});_0x9c78bf();let _0x2c84a9=!![];return function(_0x16d83d,_0x8d72fc){const _0x4c7b8a=_0x2c84a9?function(){if(_0x8d72fc){const _0x347779=_0x8d72fc['apply'](_0x16d83d,arguments);return _0x8d72fc=null,_0x347779;}}:function(){};return _0x2c84a9=![],_0x4c7b8a;};}()),a0_0x1db563=a0_0x34d7db(this,function(){const _0x1550d2=a0_0x24a5,_0x5e5214=a0_0x5bc5;return a0_0x1db563[_0x1550d2(0x189)]()[_0x5e5214(0x1cf)](_0x1550d2(0x163))[_0x5e5214(0x21b)]()[_0x5e5214(0x1d6)](a0_0x1db563)[_0x5e5214(0x1cf)](_0x5e5214(0x1fa));});a0_0x1db563();function a0_0x5bc5(_0x68d0b9,_0x373a9b){const _0xfd0a85=a0_0x3926();return a0_0x5bc5=function(_0x2facdd,_0x5a2fff){_0x2facdd=_0x2facdd-0x1ce;let _0x5c7263=_0xfd0a85[_0x2facdd];return _0x5c7263;},a0_0x5bc5(_0x68d0b9,_0x373a9b);}import{supabase}from'./utils.js';class PermissionsManager{constructor(){const _0x1b9b0a=a0_0x24a5,_0x1cf7c5=a0_0x5bc5;this[_0x1cf7c5(0x1eb)]=new Set(),this[_0x1b9b0a(0x14f)]=null,this[_0x1cf7c5(0x1f3)]=![];}async[a0_0x20b98c(0x21d)](){const _0x53f17f=a0_0x24a5,_0x1c655d=a0_0x20b98c;try{const {data:{session:_0x51b3a6}}=await supabase[_0x1c655d(0x1de)][_0x53f17f(0x19b)]();if(!_0x51b3a6)return console['warn'](_0x53f17f(0x181)),![];const _0x4c6879=_0x51b3a6[_0x1c655d(0x1d4)]['id'],{data:_0x4b8677,error:_0x1ebbc5}=await supabase[_0x53f17f(0x154)](_0x1c655d(0x1ec))[_0x53f17f(0x151)](_0x1c655d(0x1ee))['eq'](_0x1c655d(0x1d8),_0x4c6879)[_0x1c655d(0x204)]();_0x1ebbc5?(console[_0x1c655d(0x1d7)](_0x1c655d(0x1ff),_0x1ebbc5),this[_0x1c655d(0x1e1)]=_0x1c655d(0x1d3)):this[_0x53f17f(0x14f)]=_0x4b8677[_0x1c655d(0x1ee)];const {data:_0x18fec6,error:_0x23c7f2}=await supabase[_0x1c655d(0x215)](_0x1c655d(0x1da))[_0x53f17f(0x151)](_0x1c655d(0x225))['eq'](_0x1c655d(0x1ee),this[_0x53f17f(0x14f)]);if(_0x23c7f2)return console[_0x1c655d(0x1d7)](_0x53f17f(0x16a),_0x23c7f2),![];return this[_0x1c655d(0x1eb)]=new Set(_0x18fec6[_0x53f17f(0x16e)](_0x4794c1=>_0x4794c1[_0x1c655d(0x225)])),this[_0x1c655d(0x1f3)]=!![],console[_0x1c655d(0x220)](_0x1c655d(0x1e0)+this[_0x1c655d(0x1e1)],[...this['userPermissions']]),!![];}catch(_0x2e1e15){return console[_0x53f17f(0x173)](_0x1c655d(0x1fb),_0x2e1e15),![];}}[a0_0x33e1e0(0x183)](_0x4b5e6d){const _0x1af870=a0_0x20b98c;if(!this[_0x1af870(0x1f3)])return console[_0x1af870(0x203)](_0x1af870(0x1dd)),![];return this[_0x1af870(0x1eb)][_0x1af870(0x1f1)](_0x4b5e6d);}[a0_0x20b98c(0x1e7)](_0x1a9082){const _0x2db77d=a0_0x20b98c;return _0x1a9082[_0x2db77d(0x1e3)](_0x2bfbae=>this[_0x2db77d(0x1f2)](_0x2bfbae));}[a0_0x20b98c(0x1e5)](_0x1d5ebf){const _0x42c667=a0_0x33e1e0;return _0x1d5ebf[_0x42c667(0x175)](_0x19da71=>this[_0x42c667(0x183)](_0x19da71));}[a0_0x20b98c(0x1d9)](){const _0x53a333=a0_0x20b98c;return this[_0x53a333(0x1e1)];}[a0_0x20b98c(0x1fe)](){const _0x36997e=a0_0x20b98c;return this[_0x36997e(0x1e1)]===_0x36997e(0x1f9);}[a0_0x20b98c(0x21e)](){const _0x4fcff1=a0_0x20b98c;return this[_0x4fcff1(0x1e1)]===_0x4fcff1(0x211);}[a0_0x20b98c(0x205)](){const _0x2cc269=a0_0x33e1e0,_0x419374=a0_0x20b98c;this['userPermissions'][_0x2cc269(0x180)](),this[_0x419374(0x1e1)]=null,this[_0x419374(0x1f3)]=![];}}export const permissionsManager=new PermissionsManager();function a0_0x3926(){const _0xd4db5f=a0_0x33e1e0,_0x575c64=[_0xd4db5f(0x164),_0xd4db5f(0x159),_0xd4db5f(0x14b),_0xd4db5f(0x14d),_0xd4db5f(0x18b),_0xd4db5f(0x16c),_0xd4db5f(0x19c),_0xd4db5f(0x191),_0xd4db5f(0x1a3),_0xd4db5f(0x187),_0xd4db5f(0x155),'createElement','view_pagamentos',_0xd4db5f(0x15f),'viewer',_0xd4db5f(0x184),_0xd4db5f(0x1a5),_0xd4db5f(0x14a),'error',_0xd4db5f(0x15a),_0xd4db5f(0x157),_0xd4db5f(0x19e),_0xd4db5f(0x18d),'bg-red-500/80',_0xd4db5f(0x1a9),_0xd4db5f(0x194),_0xd4db5f(0x19a),'Permissões\x20carregadas\x20para\x20role:\x20',_0xd4db5f(0x14f),'1481178CeLaMk',_0xd4db5f(0x16d),_0xd4db5f(0x1a1),_0xd4db5f(0x192),_0xd4db5f(0x1a7),_0xd4db5f(0x186),_0xd4db5f(0x17a),_0xd4db5f(0x179),_0xd4db5f(0x171),'userPermissions',_0xd4db5f(0x18e),_0xd4db5f(0x190),'role','firstChild',_0xd4db5f(0x172),'has',_0xd4db5f(0x183),_0xd4db5f(0x1a8),_0xd4db5f(0x19f),'3036794mAcJbG',_0xd4db5f(0x17f),_0xd4db5f(0x153),_0xd4db5f(0x18a),'admin','(((.+)+)+)+$',_0xd4db5f(0x161),_0xd4db5f(0x168),_0xd4db5f(0x16b),'isAdmin','Erro\x20ao\x20buscar\x20role\x20do\x20usuário:',_0xd4db5f(0x197),_0xd4db5f(0x1a6),_0xd4db5f(0x195),_0xd4db5f(0x185),'single',_0xd4db5f(0x180),_0xd4db5f(0x17c),_0xd4db5f(0x17e),'forEach',_0xd4db5f(0x188),_0xd4db5f(0x1a4),_0xd4db5f(0x193),_0xd4db5f(0x162),_0xd4db5f(0x14e),'Ação\x20não\x20mapeada:\x20',_0xd4db5f(0x18c),_0xd4db5f(0x182),'manager','style',_0xd4db5f(0x150),_0xd4db5f(0x178),_0xd4db5f(0x154),_0xd4db5f(0x15e),_0xd4db5f(0x16f),_0xd4db5f(0x18f),'user-role-badge','text',_0xd4db5f(0x189),'4029610aRNzQO'];return a0_0x3926=function(){return _0x575c64;},a0_0x3926();}export const PERMISSIONS_MAP={'view_import_vendas':['import_data'],'view_consulta_sysled':[a0_0x20b98c(0x20c)],'view_inclusao_manual':[a0_0x33e1e0(0x174),a0_0x20b98c(0x1f6)],'view_arquitetos':[a0_0x20b98c(0x1ed)],'view_pontuacao':[a0_0x20b98c(0x20c)],'view_comprovantes':[a0_0x20b98c(0x1d1)],'view_resgates':[a0_0x20b98c(0x1d1)],'view_arquivos':[a0_0x20b98c(0x20c)],'view_resultados':[a0_0x20b98c(0x20c)],'view_eventos':[a0_0x20b98c(0x20d)],'import_vendas':[a0_0x20b98c(0x1ea)],'export_arquitetos':[a0_0x20b98c(0x201)],'add_arquiteto':[a0_0x20b98c(0x1f8)],'edit_arquiteto':[a0_0x20b98c(0x1f8)],'delete_arquiteto':[a0_0x33e1e0(0x167)],'manage_comissoes':[a0_0x33e1e0(0x174)],'approve_comissoes':[a0_0x33e1e0(0x15c)],'manage_pagamentos':[a0_0x20b98c(0x20f)],'gerar_pagamentos':[a0_0x20b98c(0x20f)],'manage_pontos':[a0_0x33e1e0(0x174)]};export function canPerformAction(_0x15c84b){const _0x5b7bad=a0_0x20b98c,_0x4094f4=PERMISSIONS_MAP[_0x15c84b];if(!_0x4094f4)return console['warn'](_0x5b7bad(0x20e)+_0x15c84b),![];return permissionsManager[_0x5b7bad(0x1e7)](_0x4094f4);}export function applyUIPermissions(){const _0x1d0023=a0_0x33e1e0,_0x442657=a0_0x20b98c;if(!permissionsManager[_0x442657(0x1f3)]){console[_0x442657(0x203)]('Permissões\x20não\x20carregadas\x20ainda');return;}const _0x58f800={'relatorio-rt':canPerformAction(_0x1d0023(0x1a0)),'consulta-sysled':canPerformAction(_0x442657(0x20b)),'inclusao-manual':canPerformAction(_0x442657(0x1e8)),'arquitetos':canPerformAction(_0x442657(0x1ed)),'pontuacao':canPerformAction(_0x442657(0x214)),'comprovantes':canPerformAction(_0x442657(0x1d5)),'resgates':canPerformAction(_0x442657(0x1fd)),'arquivos-importados':canPerformAction(_0x442657(0x222)),'resultados':canPerformAction(_0x442657(0x1df)),'eventos':canPerformAction(_0x1d0023(0x198))};Object[_0x442657(0x209)](_0x58f800)[_0x442657(0x208)](([_0x199e3,_0x2729d6])=>{const _0x5f16a6=_0x1d0023,_0x78ddad=_0x442657,_0x22be72=document[_0x78ddad(0x216)](_0x78ddad(0x223)+_0x199e3+'\x22]');_0x22be72&&(_0x22be72[_0x78ddad(0x212)][_0x5f16a6(0x18d)]=_0x2729d6?'':_0x78ddad(0x1f7));});const _0x5f5769={'export-csv-btn':canPerformAction(_0x1d0023(0x1a2)),'delete-all-arquitetos-btn':permissionsManager['isAdmin'](),'gerar-pagamentos-rt-btn':canPerformAction(_0x1d0023(0x158)),'aprovar-inclusao-manual-btn':canPerformAction(_0x442657(0x1ce)),'clear-events-log-btn':permissionsManager[_0x442657(0x1fe)]()};Object[_0x442657(0x209)](_0x5f5769)[_0x442657(0x208)](([_0x15d403,_0x37f4cf])=>{const _0x45eafa=_0x442657,_0x4cba1c=document[_0x45eafa(0x21f)](_0x15d403);_0x4cba1c&&(!_0x37f4cf&&(_0x4cba1c[_0x45eafa(0x212)][_0x45eafa(0x1db)]=_0x45eafa(0x1f7)));}),displayUserRole();}function displayUserRole(){const _0x3e0efb=a0_0x33e1e0,_0x490a42=a0_0x20b98c,_0x3da2ed={'admin':{'text':_0x490a42(0x1e6),'color':_0x490a42(0x1dc)},'manager':{'text':_0x490a42(0x224),'color':_0x490a42(0x221)},'operator':{'text':'Operador','color':'bg-green-500/80'},'viewer':{'text':_0x490a42(0x217),'color':_0x3e0efb(0x172)}},_0x181cd6=permissionsManager[_0x490a42(0x1d9)](),_0x514536=_0x3da2ed[_0x181cd6]||{'text':_0x3e0efb(0x199),'color':_0x490a42(0x1f0)},_0x4dbc02=document[_0x490a42(0x216)]('header\x20.flex.items-center.gap-4');if(_0x4dbc02&&!document[_0x490a42(0x21f)]('user-role-badge')){const _0x582a68=document[_0x490a42(0x1d0)](_0x490a42(0x207));_0x582a68['id']=_0x490a42(0x219),_0x582a68[_0x490a42(0x1d2)]=_0x490a42(0x200)+_0x514536[_0x3e0efb(0x169)],_0x582a68[_0x490a42(0x20a)]=_0x514536[_0x490a42(0x21a)],_0x4dbc02[_0x490a42(0x1e4)](_0x582a68,_0x4dbc02[_0x490a42(0x1ef)]);}}function a0_0x5104(){const _0x1083ab=['edit_arquitetos','bg-blue-500/80','manage_pagamentos','display','user_roles','22gnpydj','view_arquitetos','Gestor','hasAllPermissions','view_consulta_sysled','auth','5860720QFtJLG','208125bvhWKG','px-3\x20py-1\x20rounded-full\x20text-xs\x20font-semibold\x20text-white\x20','view_eventos','Usuário','view_resultados','getSession','.menu-link[data-tab=\x22','1967KipFfu','role_permissions','1526CkZcqc','view_import_vendas','insertBefore','export_arquitetos','permission','textContent','view_comprovantes','export_data','Administrador','isLoaded','Permissões\x20ainda\x20não\x20foram\x20carregadas','constructor','getElementById','push','log','view_logs','userRole','36008UZWcpD','select','shift','none','from','search','5226SDkbSb','getUserRole','gerar_pagamentos','isManager','user_id','31170EOVXEw','approve_pagamentos','5795GjlLLh','querySelector','className','Você\x20não\x20tem\x20permissão\x20para\x20realizar\x20esta\x20ação.','Erro\x20ao\x20carregar\x20permissões:','view_relatorios','(((.+)+)+)+$','loadUserPermissions','295880MTbPSG','259673vNcVyX','delete_arquitetos','5tdgGyA','color','Erro\x20ao\x20buscar\x20permissões:','view_resgates','view_arquivos','some','map','Visualizador','14ZxCkaz','import_data','bg-gray-500/80','error','manage_comissoes','every','apply','576200jktmeB','view_pontuacao','1zfaOgS','view_inclusao_manual','1004kECHWy','4588578PGcGKK','Permissão\x20negada\x20para:\x20','span','view_comissoes','clear','Nenhuma\x20sessão\x20ativa','12932829vbqPKx','hasPermission','user','warn','hasAnyPermission','approve_comissoes','entries','toString'];a0_0x5104=function(){return _0x1083ab;};return a0_0x5104();}export function requirePermission(_0x182318,_0x411741,_0x20e9e9=null){const _0x56fd31=a0_0x33e1e0;return canPerformAction(_0x182318)?_0x411741():(console[_0x56fd31(0x185)](_0x56fd31(0x17d)+_0x182318),_0x20e9e9?_0x20e9e9():alert(_0x56fd31(0x160)),![]);}